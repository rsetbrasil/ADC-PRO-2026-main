/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/admin/orders/route";
exports.ids = ["app/api/admin/orders/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Forders%2Froute&page=%2Fapi%2Fadmin%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Forders%2Froute.ts&appDir=C%3A%5CUsers%5CRafael%5CDesktop%5CADC-PRO-2026-main%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CRafael%5CDesktop%5CADC-PRO-2026-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Forders%2Froute&page=%2Fapi%2Fadmin%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Forders%2Froute.ts&appDir=C%3A%5CUsers%5CRafael%5CDesktop%5CADC-PRO-2026-main%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CRafael%5CDesktop%5CADC-PRO-2026-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var C_Users_Rafael_Desktop_ADC_PRO_2026_main_src_app_api_admin_orders_route_ts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./src/app/api/admin/orders/route.ts */ \"(rsc)/./src/app/api/admin/orders/route.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/admin/orders/route\",\n        pathname: \"/api/admin/orders\",\n        filename: \"route\",\n        bundlePath: \"app/api/admin/orders/route\"\n    },\n    distDir: \".next-dev\" || 0,\n    relativeProjectDir:  false || '',\n    resolvedPagePath: \"C:\\\\Users\\\\Rafael\\\\Desktop\\\\ADC-PRO-2026-main\\\\src\\\\app\\\\api\\\\admin\\\\orders\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Rafael_Desktop_ADC_PRO_2026_main_src_app_api_admin_orders_route_ts__WEBPACK_IMPORTED_MODULE_16__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/api/admin/orders/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        if (!(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZhZG1pbiUyRm9yZGVycyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYWRtaW4lMkZvcmRlcnMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZhZG1pbiUyRm9yZGVycyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNSYWZhZWwlNUNEZXNrdG9wJTVDQURDLVBSTy0yMDI2LW1haW4lNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q1JhZmFlbCU1Q0Rlc2t0b3AlNUNBREMtUFJPLTIwMjYtbWFpbiZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCZpc0dsb2JhbE5vdEZvdW5kRW5hYmxlZD0hIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ2Q7QUFDUztBQUNPO0FBQ0s7QUFDbUM7QUFDakQ7QUFDTztBQUNmO0FBQ3NDO0FBQ3pCO0FBQ007QUFDQztBQUNoQjtBQUNnRDtBQUNsSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxhQUFhLFdBQW9DLElBQUksQ0FBRTtBQUN2RCx3QkFBd0IsTUFBdUM7QUFDL0Q7QUFDQTtBQUNBLFlBQVk7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QUNBLGtCQUFrQiw2RUFBWTtBQUM5QjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDViw2RUFBNkUsZ0ZBQWM7QUFDM0YsaUNBQWlDLFFBQVEsRUFBRSxRQUFRO0FBQ25ELDBCQUEwQix1RUFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLE1BQU07QUFDTiw2QkFBNkIsNkZBQWU7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsMkZBQW1CO0FBQ3JEO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDZFQUFZO0FBQzFCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCB7IGdldFJlcXVlc3RNZXRhIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVxdWVzdC1tZXRhXCI7XG5pbXBvcnQgeyBnZXRUcmFjZXIsIFNwYW5LaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL3RyYWNlclwiO1xuaW1wb3J0IHsgbm9ybWFsaXplQXBwUGF0aCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9yb3V0ZXIvdXRpbHMvYXBwLXBhdGhzXCI7XG5pbXBvcnQgeyBOb2RlTmV4dFJlcXVlc3QsIE5vZGVOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9iYXNlLWh0dHAvbm9kZVwiO1xuaW1wb3J0IHsgTmV4dFJlcXVlc3RBZGFwdGVyLCBzaWduYWxGcm9tTm9kZVJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvd2ViL3NwZWMtZXh0ZW5zaW9uL2FkYXB0ZXJzL25leHQtcmVxdWVzdFwiO1xuaW1wb3J0IHsgQmFzZVNlcnZlclNwYW4gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBnZXRSZXZhbGlkYXRlUmVhc29uIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvaW5zdHJ1bWVudGF0aW9uL3V0aWxzXCI7XG5pbXBvcnQgeyBzZW5kUmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9zZW5kLXJlc3BvbnNlXCI7XG5pbXBvcnQgeyBmcm9tTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMsIHRvTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci93ZWIvdXRpbHNcIjtcbmltcG9ydCB7IGdldENhY2hlQ29udHJvbEhlYWRlciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9jYWNoZS1jb250cm9sXCI7XG5pbXBvcnQgeyBJTkZJTklURV9DQUNIRSwgTkVYVF9DQUNIRV9UQUdTX0hFQURFUiB9IGZyb20gXCJuZXh0L2Rpc3QvbGliL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgTm9GYWxsYmFja0Vycm9yIH0gZnJvbSBcIm5leHQvZGlzdC9zaGFyZWQvbGliL25vLWZhbGxiYWNrLWVycm9yLmV4dGVybmFsXCI7XG5pbXBvcnQgeyBDYWNoZWRSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yZXNwb25zZS1jYWNoZVwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXFJhZmFlbFxcXFxEZXNrdG9wXFxcXEFEQy1QUk8tMjAyNi1tYWluXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGFkbWluXFxcXG9yZGVyc1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYWRtaW4vb3JkZXJzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYWRtaW4vb3JkZXJzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hZG1pbi9vcmRlcnMvcm91dGVcIlxuICAgIH0sXG4gICAgZGlzdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX0RJU1RfRElSIHx8ICcnLFxuICAgIHJlbGF0aXZlUHJvamVjdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX1BST0pFQ1RfRElSIHx8ICcnLFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcUmFmYWVsXFxcXERlc2t0b3BcXFxcQURDLVBSTy0yMDI2LW1haW5cXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcYWRtaW5cXFxcb3JkZXJzXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgd29ya0FzeW5jU3RvcmFnZSxcbiAgICAgICAgd29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIHBhdGNoRmV0Y2gsICB9O1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMsIGN0eCkge1xuICAgIHZhciBfbmV4dENvbmZpZ19leHBlcmltZW50YWw7XG4gICAgbGV0IHNyY1BhZ2UgPSBcIi9hcGkvYWRtaW4vb3JkZXJzL3JvdXRlXCI7XG4gICAgLy8gdHVyYm9wYWNrIGRvZXNuJ3Qgbm9ybWFsaXplIGAvaW5kZXhgIGluIHRoZSBwYWdlIG5hbWVcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIHRvIHByb2Nlc3MgZHluYW1pYyByb3V0ZXMgcHJvcGVybHlcbiAgICAvLyBUT0RPOiBmaXggdHVyYm9wYWNrIHByb3ZpZGluZyBkaWZmZXJpbmcgdmFsdWUgZnJvbSB3ZWJwYWNrXG4gICAgaWYgKHByb2Nlc3MuZW52LlRVUkJPUEFDSykge1xuICAgICAgICBzcmNQYWdlID0gc3JjUGFnZS5yZXBsYWNlKC9cXC9pbmRleCQvLCAnJykgfHwgJy8nO1xuICAgIH0gZWxzZSBpZiAoc3JjUGFnZSA9PT0gJy9pbmRleCcpIHtcbiAgICAgICAgLy8gd2UgYWx3YXlzIG5vcm1hbGl6ZSAvaW5kZXggc3BlY2lmaWNhbGx5XG4gICAgICAgIHNyY1BhZ2UgPSAnLyc7XG4gICAgfVxuICAgIGNvbnN0IG11bHRpWm9uZURyYWZ0TW9kZSA9IHByb2Nlc3MuZW52Ll9fTkVYVF9NVUxUSV9aT05FX0RSQUZUX01PREU7XG4gICAgY29uc3QgcHJlcGFyZVJlc3VsdCA9IGF3YWl0IHJvdXRlTW9kdWxlLnByZXBhcmUocmVxLCByZXMsIHtcbiAgICAgICAgc3JjUGFnZSxcbiAgICAgICAgbXVsdGlab25lRHJhZnRNb2RlXG4gICAgfSk7XG4gICAgaWYgKCFwcmVwYXJlUmVzdWx0KSB7XG4gICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDAwO1xuICAgICAgICByZXMuZW5kKCdCYWQgUmVxdWVzdCcpO1xuICAgICAgICBjdHgud2FpdFVudGlsID09IG51bGwgPyB2b2lkIDAgOiBjdHgud2FpdFVudGlsLmNhbGwoY3R4LCBQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB7IGJ1aWxkSWQsIHBhcmFtcywgbmV4dENvbmZpZywgaXNEcmFmdE1vZGUsIHByZXJlbmRlck1hbmlmZXN0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0LCBpc09uRGVtYW5kUmV2YWxpZGF0ZSwgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsIHJlc29sdmVkUGF0aG5hbWUgfSA9IHByZXBhcmVSZXN1bHQ7XG4gICAgY29uc3Qgbm9ybWFsaXplZFNyY1BhZ2UgPSBub3JtYWxpemVBcHBQYXRoKHNyY1BhZ2UpO1xuICAgIGxldCBpc0lzciA9IEJvb2xlYW4ocHJlcmVuZGVyTWFuaWZlc3QuZHluYW1pY1JvdXRlc1tub3JtYWxpemVkU3JjUGFnZV0gfHwgcHJlcmVuZGVyTWFuaWZlc3Qucm91dGVzW3Jlc29sdmVkUGF0aG5hbWVdKTtcbiAgICBpZiAoaXNJc3IgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgIGNvbnN0IGlzUHJlcmVuZGVyZWQgPSBCb29sZWFuKHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tyZXNvbHZlZFBhdGhuYW1lXSk7XG4gICAgICAgIGNvbnN0IHByZXJlbmRlckluZm8gPSBwcmVyZW5kZXJNYW5pZmVzdC5keW5hbWljUm91dGVzW25vcm1hbGl6ZWRTcmNQYWdlXTtcbiAgICAgICAgaWYgKHByZXJlbmRlckluZm8pIHtcbiAgICAgICAgICAgIGlmIChwcmVyZW5kZXJJbmZvLmZhbGxiYWNrID09PSBmYWxzZSAmJiAhaXNQcmVyZW5kZXJlZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb0ZhbGxiYWNrRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgY2FjaGVLZXkgPSBudWxsO1xuICAgIGlmIChpc0lzciAmJiAhcm91dGVNb2R1bGUuaXNEZXYgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgIGNhY2hlS2V5ID0gcmVzb2x2ZWRQYXRobmFtZTtcbiAgICAgICAgLy8gZW5zdXJlIC9pbmRleCBhbmQgLyBpcyBub3JtYWxpemVkIHRvIG9uZSBrZXlcbiAgICAgICAgY2FjaGVLZXkgPSBjYWNoZUtleSA9PT0gJy9pbmRleCcgPyAnLycgOiBjYWNoZUtleTtcbiAgICB9XG4gICAgY29uc3Qgc3VwcG9ydHNEeW5hbWljUmVzcG9uc2UgPSAvLyBJZiB3ZSdyZSBpbiBkZXZlbG9wbWVudCwgd2UgYWx3YXlzIHN1cHBvcnQgZHluYW1pYyBIVE1MXG4gICAgcm91dGVNb2R1bGUuaXNEZXYgPT09IHRydWUgfHwgLy8gSWYgdGhpcyBpcyBub3QgU1NHIG9yIGRvZXMgbm90IGhhdmUgc3RhdGljIHBhdGhzLCB0aGVuIGl0IHN1cHBvcnRzXG4gICAgLy8gZHluYW1pYyBIVE1MLlxuICAgICFpc0lzcjtcbiAgICAvLyBUaGlzIGlzIGEgcmV2YWxpZGF0aW9uIHJlcXVlc3QgaWYgdGhlIHJlcXVlc3QgaXMgZm9yIGEgc3RhdGljXG4gICAgLy8gcGFnZSBhbmQgaXQgaXMgbm90IGJlaW5nIHJlc3VtZWQgZnJvbSBhIHBvc3Rwb25lZCByZW5kZXIgYW5kXG4gICAgLy8gaXQgaXMgbm90IGEgZHluYW1pYyBSU0MgcmVxdWVzdCB0aGVuIGl0IGlzIGEgcmV2YWxpZGF0aW9uXG4gICAgLy8gcmVxdWVzdC5cbiAgICBjb25zdCBpc1JldmFsaWRhdGUgPSBpc0lzciAmJiAhc3VwcG9ydHNEeW5hbWljUmVzcG9uc2U7XG4gICAgY29uc3QgbWV0aG9kID0gcmVxLm1ldGhvZCB8fCAnR0VUJztcbiAgICBjb25zdCB0cmFjZXIgPSBnZXRUcmFjZXIoKTtcbiAgICBjb25zdCBhY3RpdmVTcGFuID0gdHJhY2VyLmdldEFjdGl2ZVNjb3BlU3BhbigpO1xuICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICAgIHBhcmFtcyxcbiAgICAgICAgcHJlcmVuZGVyTWFuaWZlc3QsXG4gICAgICAgIHJlbmRlck9wdHM6IHtcbiAgICAgICAgICAgIGV4cGVyaW1lbnRhbDoge1xuICAgICAgICAgICAgICAgIGNhY2hlQ29tcG9uZW50czogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5jYWNoZUNvbXBvbmVudHMpLFxuICAgICAgICAgICAgICAgIGF1dGhJbnRlcnJ1cHRzOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmF1dGhJbnRlcnJ1cHRzKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlLFxuICAgICAgICAgICAgaW5jcmVtZW50YWxDYWNoZTogZ2V0UmVxdWVzdE1ldGEocmVxLCAnaW5jcmVtZW50YWxDYWNoZScpLFxuICAgICAgICAgICAgY2FjaGVMaWZlUHJvZmlsZXM6IChfbmV4dENvbmZpZ19leHBlcmltZW50YWwgPSBuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbC5jYWNoZUxpZmUsXG4gICAgICAgICAgICBpc1JldmFsaWRhdGUsXG4gICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWwsXG4gICAgICAgICAgICBvbkNsb3NlOiAoY2IpPT57XG4gICAgICAgICAgICAgICAgcmVzLm9uKCdjbG9zZScsIGNiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkFmdGVyVGFza0Vycm9yOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBvbkluc3RydW1lbnRhdGlvblJlcXVlc3RFcnJvcjogKGVycm9yLCBfcmVxdWVzdCwgZXJyb3JDb250ZXh0KT0+cm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnJvciwgZXJyb3JDb250ZXh0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0KVxuICAgICAgICB9LFxuICAgICAgICBzaGFyZWRDb250ZXh0OiB7XG4gICAgICAgICAgICBidWlsZElkXG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG5vZGVOZXh0UmVxID0gbmV3IE5vZGVOZXh0UmVxdWVzdChyZXEpO1xuICAgIGNvbnN0IG5vZGVOZXh0UmVzID0gbmV3IE5vZGVOZXh0UmVzcG9uc2UocmVzKTtcbiAgICBjb25zdCBuZXh0UmVxID0gTmV4dFJlcXVlc3RBZGFwdGVyLmZyb21Ob2RlTmV4dFJlcXVlc3Qobm9kZU5leHRSZXEsIHNpZ25hbEZyb21Ob2RlUmVzcG9uc2UocmVzKSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaW52b2tlUm91dGVNb2R1bGUgPSBhc3luYyAoc3Bhbik9PntcbiAgICAgICAgICAgIHJldHVybiByb3V0ZU1vZHVsZS5oYW5kbGUobmV4dFJlcSwgY29udGV4dCkuZmluYWxseSgoKT0+e1xuICAgICAgICAgICAgICAgIGlmICghc3BhbikgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgICdodHRwLnN0YXR1c19jb2RlJzogcmVzLnN0YXR1c0NvZGUsXG4gICAgICAgICAgICAgICAgICAgICduZXh0LnJzYyc6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm9vdFNwYW5BdHRyaWJ1dGVzID0gdHJhY2VyLmdldFJvb3RTcGFuQXR0cmlidXRlcygpO1xuICAgICAgICAgICAgICAgIC8vIFdlIHdlcmUgdW5hYmxlIHRvIGdldCBhdHRyaWJ1dGVzLCBwcm9iYWJseSBPVEVMIGlzIG5vdCBlbmFibGVkXG4gICAgICAgICAgICAgICAgaWYgKCFyb290U3BhbkF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKSAhPT0gQmFzZVNlcnZlclNwYW4uaGFuZGxlUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFVuZXhwZWN0ZWQgcm9vdCBzcGFuIHR5cGUgJyR7cm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKX0nLiBQbGVhc2UgcmVwb3J0IHRoaXMgTmV4dC5qcyBpc3N1ZSBodHRwczovL2dpdGh1Yi5jb20vdmVyY2VsL25leHQuanNgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZSA9IHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQucm91dGUnKTtcbiAgICAgICAgICAgICAgICBpZiAocm91dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGAke21ldGhvZH0gJHtyb3V0ZX1gO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQucm91dGUnOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5zcGFuX25hbWUnOiBuYW1lXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUobmFtZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKGAke21ldGhvZH0gJHtyZXEudXJsfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBoYW5kbGVSZXNwb25zZSA9IGFzeW5jIChjdXJyZW50U3Bhbik9PntcbiAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlR2VuZXJhdG9yID0gYXN5bmMgKHsgcHJldmlvdXNDYWNoZUVudHJ5IH0pPT57XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpICYmIGlzT25EZW1hbmRSZXZhbGlkYXRlICYmIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkICYmICFwcmV2aW91c0NhY2hlRW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb24tZGVtYW5kIHJldmFsaWRhdGUgYWx3YXlzIHNldHMgdGhpcyBoZWFkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgJ1JFVkFMSURBVEVEJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuZW5kKCdUaGlzIHBhZ2UgY291bGQgbm90IGJlIGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGludm9rZVJvdXRlTW9kdWxlKGN1cnJlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLmZldGNoTWV0cmljcyA9IGNvbnRleHQucmVuZGVyT3B0cy5mZXRjaE1ldHJpY3M7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwZW5kaW5nV2FpdFVudGlsID0gY29udGV4dC5yZW5kZXJPcHRzLnBlbmRpbmdXYWl0VW50aWw7XG4gICAgICAgICAgICAgICAgICAgIC8vIEF0dGVtcHQgdXNpbmcgcHJvdmlkZWQgd2FpdFVudGlsIGlmIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBpdCdzIG5vdCB3ZSBmYWxsYmFjayB0byBzZW5kUmVzcG9uc2UncyBoYW5kbGluZ1xuICAgICAgICAgICAgICAgICAgICBpZiAocGVuZGluZ1dhaXRVbnRpbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN0eC53YWl0VW50aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgud2FpdFVudGlsKHBlbmRpbmdXYWl0VW50aWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdXYWl0VW50aWwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVUYWdzID0gY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFRhZ3M7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSByZXF1ZXN0IGlzIGZvciBhIHN0YXRpYyByZXNwb25zZSwgd2UgY2FuIGNhY2hlIGl0IHNvIGxvbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gYXMgaXQncyBub3QgZWRnZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSXNyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgcmVzcG9uc2UuYmxvYigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29weSB0aGUgaGVhZGVycyBmcm9tIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB0b05vZGVPdXRnb2luZ0h0dHBIZWFkZXJzKHJlc3BvbnNlLmhlYWRlcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlVGFncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbTkVYVF9DQUNIRV9UQUdTX0hFQURFUl0gPSBjYWNoZVRhZ3M7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddICYmIGJsb2IudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddID0gYmxvYi50eXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV2YWxpZGF0ZSA9IHR5cGVvZiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZSA9PT0gJ3VuZGVmaW5lZCcgfHwgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGUgPj0gSU5GSU5JVEVfQ0FDSEUgPyBmYWxzZSA6IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhwaXJlID0gdHlwZW9mIGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmUgPT09ICd1bmRlZmluZWQnIHx8IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmUgPj0gSU5GSU5JVEVfQ0FDSEUgPyB1bmRlZmluZWQgOiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBjYWNoZSBlbnRyeSBmb3IgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVFbnRyeSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBraW5kOiBDYWNoZWRSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogQnVmZmVyLmZyb20oYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVFbnRyeTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbmQgcmVzcG9uc2Ugd2l0aG91dCBjYWNoaW5nIGlmIG5vdCBJU1JcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIHJlc3BvbnNlLCBjb250ZXh0LnJlbmRlck9wdHMucGVuZGluZ1dhaXRVbnRpbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGEgYmFja2dyb3VuZCByZXZhbGlkYXRlIHdlIG5lZWQgdG8gcmVwb3J0XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSByZXF1ZXN0IGVycm9yIGhlcmUgYXMgaXQgd29uJ3QgYmUgYnViYmxlZFxuICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNDYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiBwcmV2aW91c0NhY2hlRW50cnkuaXNTdGFsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZXJLaW5kOiAnQXBwIFJvdXRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVQYXRoOiBzcmNQYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JvdXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByb3V0ZXJTZXJ2ZXJDb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSBhd2FpdCByb3V0ZU1vZHVsZS5oYW5kbGVSZXNwb25zZSh7XG4gICAgICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgICAgIG5leHRDb25maWcsXG4gICAgICAgICAgICAgICAgY2FjaGVLZXksXG4gICAgICAgICAgICAgICAgcm91dGVLaW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICAgICAgICAgIGlzRmFsbGJhY2s6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgICAgICAgICAgICAgIGlzUm91dGVQUFJFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlT25seUdlbmVyYXRlZCxcbiAgICAgICAgICAgICAgICByZXNwb25zZUdlbmVyYXRvcixcbiAgICAgICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgY3JlYXRlIGEgY2FjaGVFbnRyeSBmb3IgSVNSXG4gICAgICAgICAgICBpZiAoIWlzSXNyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGNhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZSA9IGNhY2hlRW50cnkudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfY2FjaGVFbnRyeV92YWx1ZS5raW5kKSAhPT0gQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSkge1xuICAgICAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTE7XG4gICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcihgSW52YXJpYW50OiBhcHAtcm91dGUgcmVjZWl2ZWQgaW52YWxpZCBjYWNoZSBlbnRyeSAke2NhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZTEgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUxLmtpbmR9YCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFNzAxXCIsXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKSkge1xuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgaXNPbkRlbWFuZFJldmFsaWRhdGUgPyAnUkVWQUxJREFURUQnIDogY2FjaGVFbnRyeS5pc01pc3MgPyAnTUlTUycgOiBjYWNoZUVudHJ5LmlzU3RhbGUgPyAnU1RBTEUnIDogJ0hJVCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRHJhZnQgbW9kZSBzaG91bGQgbmV2ZXIgYmUgY2FjaGVkXG4gICAgICAgICAgICBpZiAoaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJywgJ3ByaXZhdGUsIG5vLWNhY2hlLCBuby1zdG9yZSwgbWF4LWFnZT0wLCBtdXN0LXJldmFsaWRhdGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBmcm9tTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMoY2FjaGVFbnRyeS52YWx1ZS5oZWFkZXJzKTtcbiAgICAgICAgICAgIGlmICghKGdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykgJiYgaXNJc3IpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5kZWxldGUoTkVYVF9DQUNIRV9UQUdTX0hFQURFUik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiBjYWNoZSBjb250cm9sIGlzIGFscmVhZHkgc2V0IG9uIHRoZSByZXNwb25zZSB3ZSBkb24ndFxuICAgICAgICAgICAgLy8gb3ZlcnJpZGUgaXQgdG8gYWxsb3cgdXNlcnMgdG8gY3VzdG9taXplIGl0IHZpYSBuZXh0LmNvbmZpZ1xuICAgICAgICAgICAgaWYgKGNhY2hlRW50cnkuY2FjaGVDb250cm9sICYmICFyZXMuZ2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJykgJiYgIWhlYWRlcnMuZ2V0KCdDYWNoZS1Db250cm9sJykpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLnNldCgnQ2FjaGUtQ29udHJvbCcsIGdldENhY2hlQ29udHJvbEhlYWRlcihjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgbmV3IFJlc3BvbnNlKGNhY2hlRW50cnkudmFsdWUuYm9keSwge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBjYWNoZUVudHJ5LnZhbHVlLnN0YXR1cyB8fCAyMDBcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICAvLyBUT0RPOiBhY3RpdmVTcGFuIGNvZGUgcGF0aCBpcyBmb3Igd2hlbiB3cmFwcGVkIGJ5XG4gICAgICAgIC8vIG5leHQtc2VydmVyIGNhbiBiZSByZW1vdmVkIHdoZW4gdGhpcyBpcyBubyBsb25nZXIgdXNlZFxuICAgICAgICBpZiAoYWN0aXZlU3Bhbikge1xuICAgICAgICAgICAgYXdhaXQgaGFuZGxlUmVzcG9uc2UoYWN0aXZlU3Bhbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0cmFjZXIud2l0aFByb3BhZ2F0ZWRDb250ZXh0KHJlcS5oZWFkZXJzLCAoKT0+dHJhY2VyLnRyYWNlKEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QsIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbk5hbWU6IGAke21ldGhvZH0gJHtyZXEudXJsfWAsXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IFNwYW5LaW5kLlNFUlZFUixcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAubWV0aG9kJzogbWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAudGFyZ2V0JzogcmVxLnVybFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgaGFuZGxlUmVzcG9uc2UpKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBpZiAoIShlcnIgaW5zdGFuY2VvZiBOb0ZhbGxiYWNrRXJyb3IpKSB7XG4gICAgICAgICAgICBhd2FpdCByb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVyciwge1xuICAgICAgICAgICAgICAgIHJvdXRlcktpbmQ6ICdBcHAgUm91dGVyJyxcbiAgICAgICAgICAgICAgICByb3V0ZVBhdGg6IG5vcm1hbGl6ZWRTcmNQYWdlLFxuICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JvdXRlJyxcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcbiAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXRocm93IHNvIHRoYXQgd2UgY2FuIGhhbmRsZSBzZXJ2aW5nIGVycm9yIHBhZ2VcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBkdXJpbmcgc3RhdGljIGdlbmVyYXRpb24sIHRocm93IHRoZSBlcnJvciBhZ2Fpbi5cbiAgICAgICAgaWYgKGlzSXNyKSB0aHJvdyBlcnI7XG4gICAgICAgIC8vIE90aGVyd2lzZSwgc2VuZCBhIDUwMCByZXNwb25zZS5cbiAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgbmV3IFJlc3BvbnNlKG51bGwsIHtcbiAgICAgICAgICAgIHN0YXR1czogNTAwXG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Forders%2Froute&page=%2Fapi%2Fadmin%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Forders%2Froute.ts&appDir=C%3A%5CUsers%5CRafael%5CDesktop%5CADC-PRO-2026-main%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CRafael%5CDesktop%5CADC-PRO-2026-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/admin/orders/route.ts":
/*!*******************************************!*\
  !*** ./src/app/api/admin/orders/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/index.mjs\");\n/* harmony import */ var _lib_supabase_mappers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase-mappers */ \"(rsc)/./src/lib/supabase-mappers.ts\");\n/* harmony import */ var _lib_monitoring__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/monitoring */ \"(rsc)/./src/lib/monitoring.ts\");\n\n\n\n\nconst dynamic = 'force-dynamic';\nconst HOT_TTL_MS = 8000;\nconst STALE_TTL_MS = 30000;\nfunction getCacheState() {\n    const existing = globalThis.__adminOrdersApiCache;\n    if (existing) return existing;\n    const created = {\n        hotCache: new Map(),\n        inflight: new Map(),\n        stale: null\n    };\n    globalThis.__adminOrdersApiCache = created;\n    return created;\n}\nfunction getSupabaseAdmin() {\n    const existing = globalThis.__supabaseAdmin;\n    if (existing) return existing;\n    const supabaseUrl = \"https://hnpschlfoecpddoydnuv.supabase.co\";\n    const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY || \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhucHNjaGxmb2VjcGRkb3lkbnV2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg2NjE5NzksImV4cCI6MjA4NDIzNzk3OX0.pmSpGDJ3bMegT7RvNH-bHGGi-x5soaJWS74usHhyCn0\";\n    if (!supabaseUrl || !supabaseServiceKey) {\n        throw new Error('Supabase env ausente (NEXT_PUBLIC_SUPABASE_URL / NEXT_PUBLIC_SUPABASE_ANON_KEY)');\n    }\n    const created = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_3__.createClient)(supabaseUrl, supabaseServiceKey, {\n        auth: {\n            persistSession: false,\n            autoRefreshToken: false,\n            detectSessionInUrl: false\n        }\n    });\n    globalThis.__supabaseAdmin = created;\n    return created;\n}\nasync function GET(req) {\n    const startedAt = Date.now();\n    try {\n        const now = Date.now();\n        const cacheState = getCacheState();\n        const { searchParams } = new URL(req.url);\n        const includeItemsRaw = String(searchParams.get('includeItems') || '').toLowerCase();\n        const includeItems = includeItemsRaw === '1' || includeItemsRaw === 'true';\n        const id = searchParams.get('id');\n        const defaultLimit = includeItems ? 40 : 20;\n        const maxLimit = includeItems ? 60 : 40;\n        const requestedLimit = searchParams.get('limit') === 'all' ? 10000 : Number(searchParams.get('limit') || String(defaultLimit));\n        const isFetchAll = searchParams.get('limit') === 'all';\n        const limit = isFetchAll ? 10000 : Number.isFinite(requestedLimit) ? Math.min(Math.max(requestedLimit, 10), maxLimit) : defaultLimit;\n        const cursor = searchParams.get('cursor');\n        const cacheKey = id ? `id:${id}:items:${includeItems ? 1 : 0}` : `list:${isFetchAll ? 'all' : limit}:${cursor || ''}:items:${includeItems ? 1 : 0}`;\n        const hit = cacheState.hotCache.get(cacheKey);\n        if (hit && now - hit.at < HOT_TTL_MS) {\n            const res = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                data: hit.data,\n                source: hit.source,\n                cursor: cursor || null\n            });\n            res.headers.set('x-response-ms', String(Date.now() - startedAt));\n            res.headers.set('x-cache', 'HIT');\n            (0,_lib_monitoring__WEBPACK_IMPORTED_MODULE_2__.recordMetric)({\n                at: Date.now(),\n                name: 'GET /api/admin/orders',\n                ms: Date.now() - startedAt,\n                ok: true,\n                meta: {\n                    cache: 'HIT'\n                }\n            });\n            void (0,_lib_monitoring__WEBPACK_IMPORTED_MODULE_2__.maybeAlert)({\n                at: Date.now(),\n                name: 'GET /api/admin/orders',\n                ms: Date.now() - startedAt,\n                ok: true,\n                meta: {\n                    cache: 'HIT'\n                }\n            });\n            return res;\n        }\n        const existing = cacheState.inflight.get(cacheKey);\n        if (existing) {\n            if (cacheState.stale && now - cacheState.stale.at < STALE_TTL_MS) {\n                const res = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    data: cacheState.stale.data,\n                    source: `${cacheState.stale.source}_stale`,\n                    cursor: cursor || null\n                });\n                res.headers.set('x-response-ms', String(Date.now() - startedAt));\n                res.headers.set('x-cache', 'STALE');\n                (0,_lib_monitoring__WEBPACK_IMPORTED_MODULE_2__.recordMetric)({\n                    at: Date.now(),\n                    name: 'GET /api/admin/orders',\n                    ms: Date.now() - startedAt,\n                    ok: true,\n                    meta: {\n                        cache: 'STALE',\n                        inflight: true\n                    }\n                });\n                void (0,_lib_monitoring__WEBPACK_IMPORTED_MODULE_2__.maybeAlert)({\n                    at: Date.now(),\n                    name: 'GET /api/admin/orders',\n                    ms: Date.now() - startedAt,\n                    ok: true,\n                    meta: {\n                        cache: 'STALE',\n                        inflight: true\n                    }\n                });\n                return res;\n            }\n            const r = await existing;\n            const res = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                data: r.entry.data,\n                source: r.entry.source,\n                cursor: cursor || null,\n                nextCursor: r.nextCursor\n            });\n            res.headers.set('x-response-ms', String(Date.now() - startedAt));\n            res.headers.set('x-cache', 'COALESCED');\n            (0,_lib_monitoring__WEBPACK_IMPORTED_MODULE_2__.recordMetric)({\n                at: Date.now(),\n                name: 'GET /api/admin/orders',\n                ms: Date.now() - startedAt,\n                ok: true,\n                meta: {\n                    cache: 'COALESCED'\n                }\n            });\n            void (0,_lib_monitoring__WEBPACK_IMPORTED_MODULE_2__.maybeAlert)({\n                at: Date.now(),\n                name: 'GET /api/admin/orders',\n                ms: Date.now() - startedAt,\n                ok: true,\n                meta: {\n                    cache: 'COALESCED'\n                }\n            });\n            return res;\n        }\n        const supabase = getSupabaseAdmin();\n        if (id) {\n            const work = (async ()=>{\n                const row = await supabase.from('orders').select('*').eq('id', id).maybeSingle();\n                if (row.error) throw row.error;\n                if (!row.data) throw new Error('Pedido no encontrado');\n                const mapped = (0,_lib_supabase_mappers__WEBPACK_IMPORTED_MODULE_1__.mapDbOrderToOrder)(row.data);\n                const entry = {\n                    at: now,\n                    data: [\n                        mapped\n                    ],\n                    source: 'by_id'\n                };\n                return {\n                    entry,\n                    nextCursor: null\n                };\n            })();\n            cacheState.inflight.set(cacheKey, work);\n            const { entry } = await work.finally(()=>cacheState.inflight.delete(cacheKey));\n            cacheState.hotCache.set(cacheKey, entry);\n            cacheState.stale = entry;\n            const res = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                data: entry.data[0],\n                source: entry.source\n            });\n            res.headers.set('x-response-ms', String(Date.now() - startedAt));\n            res.headers.set('x-cache', 'MISS');\n            (0,_lib_monitoring__WEBPACK_IMPORTED_MODULE_2__.recordMetric)({\n                at: Date.now(),\n                name: 'GET /api/admin/orders',\n                ms: Date.now() - startedAt,\n                ok: true,\n                meta: {\n                    source: entry.source\n                }\n            });\n            void (0,_lib_monitoring__WEBPACK_IMPORTED_MODULE_2__.maybeAlert)({\n                at: Date.now(),\n                name: 'GET /api/admin/orders',\n                ms: Date.now() - startedAt,\n                ok: true,\n                meta: {\n                    source: entry.source\n                }\n            });\n            return res;\n        }\n        const selectList = includeItems ? 'id,customer,items,total,discount,downPayment,installments,installmentValue,date,firstDueDate,status,paymentMethod,installmentDetails,sellerId,sellerName,commission,commissionPaid,isCommissionManual,observations,source,created_at,updated_at' : 'id,customer,items,total,discount,downPayment,installments,installmentValue,date,firstDueDate,status,paymentMethod,installmentDetails,sellerId,sellerName,commission,commissionPaid,isCommissionManual,source,created_at,updated_at';\n        const work = (async ()=>{\n            const countRes = !cursor ? await supabase.from('orders').select('id', {\n                count: 'exact',\n                head: true\n            }) : null;\n            const totalCount = countRes?.count || null;\n            const parseCursor = (raw)=>{\n                if (!raw) return {\n                    date: null,\n                    id: null\n                };\n                const s = String(raw);\n                const idx = s.lastIndexOf('|');\n                if (idx > 0 && idx < s.length - 1) {\n                    return {\n                        date: s.slice(0, idx),\n                        id: s.slice(idx + 1)\n                    };\n                }\n                return {\n                    date: s,\n                    id: null\n                };\n            };\n            const cursorParsed = parseCursor(cursor);\n            const cursorDate = cursorParsed.date;\n            const cursorId = cursorParsed.id;\n            const cursorTime = cursorDate ? Date.parse(cursorDate) : NaN;\n            const overfetchLimit = Math.min(limit * 2, 120);\n            const idPageRaw = cursorDate ? await supabase.from('orders').select('id,date').lte('date', cursorDate).order('date', {\n                ascending: false\n            }).order('id', {\n                ascending: false\n            }).limit(overfetchLimit) : await supabase.from('orders').select('id,date').order('date', {\n                ascending: false\n            }).order('id', {\n                ascending: false\n            }).limit(limit);\n            if (idPageRaw.error) throw idPageRaw.error;\n            let idPage = idPageRaw.data || [];\n            if (cursorDate) {\n                idPage = idPage.filter((r)=>{\n                    const rowDate = String(r?.date || '');\n                    const rowId = String(r?.id || '');\n                    const rowTime = Date.parse(rowDate);\n                    if (Number.isFinite(cursorTime) && Number.isFinite(rowTime)) {\n                        if (rowTime < cursorTime) return true;\n                        if (rowTime > cursorTime) return false;\n                        return cursorId ? rowId < cursorId : false;\n                    }\n                    if (rowDate < cursorDate) return true;\n                    if (rowDate > cursorDate) return false;\n                    return cursorId ? rowId < cursorId : false;\n                });\n            }\n            idPage = idPage.slice(0, limit);\n            const ids = idPage.map((r)=>String(r.id)).filter((v)=>Boolean(v));\n            if (ids.length === 0) {\n                const entry = {\n                    at: now,\n                    data: [],\n                    source: 'by_date_ids'\n                };\n                return {\n                    entry,\n                    nextCursor: null\n                };\n            }\n            const fetchChunk = async (chunk)=>{\n                const res = await supabase.from('orders').select(selectList).in('id', chunk);\n                if (!res.error) return res.data || [];\n                const msg = String(res.error.message || '').toLowerCase();\n                if (msg.includes('statement timeout') && chunk.length > 1) {\n                    const mid = Math.ceil(chunk.length / 2);\n                    const left = await fetchChunk(chunk.slice(0, mid));\n                    const right = await fetchChunk(chunk.slice(mid));\n                    return [\n                        ...left,\n                        ...right\n                    ];\n                }\n                throw res.error;\n            };\n            const byId = new Map();\n            const chunkSize = 15;\n            for(let i = 0; i < ids.length; i += chunkSize){\n                const chunk = ids.slice(i, i + chunkSize);\n                const rows = await fetchChunk(chunk);\n                for (const r of rows){\n                    byId.set(String(r.id), r);\n                }\n            }\n            const orderedRows = ids.map((id)=>byId.get(id)).filter(Boolean);\n            const mapped = orderedRows.map(_lib_supabase_mappers__WEBPACK_IMPORTED_MODULE_1__.mapDbOrderToOrder);\n            const last = idPage[idPage.length - 1];\n            const nextCursor = last?.date && last?.id ? `${String(last.date)}|${String(last.id)}` : null;\n            const entry = {\n                at: now,\n                data: mapped,\n                source: 'by_date_ids'\n            };\n            return {\n                entry,\n                nextCursor,\n                totalCount\n            };\n        })();\n        cacheState.inflight.set(cacheKey, work);\n        const { entry, nextCursor, totalCount } = await work.finally(()=>cacheState.inflight.delete(cacheKey));\n        cacheState.hotCache.set(cacheKey, entry);\n        cacheState.stale = entry;\n        const res = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: entry.data,\n            source: entry.source,\n            cursor: cursor || null,\n            nextCursor,\n            totalCount\n        });\n        res.headers.set('x-response-ms', String(Date.now() - startedAt));\n        res.headers.set('x-cache', 'MISS');\n        while(cacheState.hotCache.size > 200){\n            const firstKey = cacheState.hotCache.keys().next().value;\n            if (!firstKey) break;\n            cacheState.hotCache.delete(firstKey);\n        }\n        (0,_lib_monitoring__WEBPACK_IMPORTED_MODULE_2__.recordMetric)({\n            at: Date.now(),\n            name: 'GET /api/admin/orders',\n            ms: Date.now() - startedAt,\n            ok: true,\n            meta: {\n                source: entry.source\n            }\n        });\n        void (0,_lib_monitoring__WEBPACK_IMPORTED_MODULE_2__.maybeAlert)({\n            at: Date.now(),\n            name: 'GET /api/admin/orders',\n            ms: Date.now() - startedAt,\n            ok: true,\n            meta: {\n                source: entry.source\n            }\n        });\n        return res;\n    } catch (e) {\n        const now = Date.now();\n        const ms = now - startedAt;\n        (0,_lib_monitoring__WEBPACK_IMPORTED_MODULE_2__.recordMetric)({\n            at: now,\n            name: 'GET /api/admin/orders',\n            ms,\n            ok: false,\n            meta: {\n                error: e?.message\n            }\n        });\n        void (0,_lib_monitoring__WEBPACK_IMPORTED_MODULE_2__.maybeAlert)({\n            at: now,\n            name: 'GET /api/admin/orders',\n            ms,\n            ok: false,\n            meta: {\n                error: e?.message\n            }\n        });\n        const cacheState = getCacheState();\n        if (cacheState.stale && now - cacheState.stale.at < STALE_TTL_MS) {\n            const res = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                data: cacheState.stale.data,\n                source: `${cacheState.stale.source}_stale`\n            });\n            res.headers.set('x-response-ms', String(ms));\n            res.headers.set('x-cache', 'STALE');\n            return res;\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: e?.message || 'Falha ao buscar pedidos'\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU1DLFdBQVdwQixLQUFLLENBQUMyQyxFQUFFLEdBQUdwRCxjQUFjO1lBQ2hFLE1BQU1xRCxNQUFNNUQscURBQVlBLENBQUM2RCxJQUFJLENBQUM7Z0JBQzVCQyxTQUFTO2dCQUNUQyxNQUFNM0IsV0FBV3BCLEtBQUssQ0FBQytDLElBQUk7Z0JBQzNCQyxRQUFRLEdBQUc1QixXQUFXcEIsS0FBSyxDQUFDZ0QsTUFBTSxDQUFDLE1BQU0sQ0FBQztZQUM1QztZQUNBSixJQUFJSyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxpQkFBaUJ6QixPQUFPMkI7WUFDeENSLElBQUlLLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLFdBQVc7WUFDM0IsT0FBT047UUFDVDtRQUVBLE9BQU81RCxxREFBWUEsQ0FBQzZELElBQUksQ0FBQztZQUFFQyxTQUFTO1lBQU9vQixPQUFPMEQsR0FBR2pCLFdBQVc7UUFBMEIsR0FBRztZQUFFa0IsUUFBUTtRQUFJO0lBQzdHO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcUmFmYWVsXFxEZXNrdG9wXFxBREMtUFJPLTIwMjYtbWFpblxcc3JjXFxhcHBcXGFwaVxcYWRtaW5cXG9yZGVyc1xccm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcbmltcG9ydCB7IG1hcERiT3JkZXJUb09yZGVyIH0gZnJvbSAnQC9saWIvc3VwYWJhc2UtbWFwcGVycyc7XG5pbXBvcnQgeyBtYXliZUFsZXJ0LCByZWNvcmRNZXRyaWMgfSBmcm9tICdAL2xpYi9tb25pdG9yaW5nJztcblxuZXhwb3J0IGNvbnN0IGR5bmFtaWMgPSAnZm9yY2UtZHluYW1pYyc7XG5cbnR5cGUgQ2FjaGVFbnRyeSA9IHsgYXQ6IG51bWJlcjsgZGF0YTogYW55W107IHNvdXJjZTogc3RyaW5nIH07XG5cbmNvbnN0IEhPVF9UVExfTVMgPSA4MDAwO1xuY29uc3QgU1RBTEVfVFRMX01TID0gMzAwMDA7XG5cbnR5cGUgQ2FjaGVTdGF0ZSA9IHtcbiAgaG90Q2FjaGU6IE1hcDxzdHJpbmcsIENhY2hlRW50cnk+O1xuICBpbmZsaWdodDogTWFwPHN0cmluZywgUHJvbWlzZTx7IGVudHJ5OiBDYWNoZUVudHJ5OyBuZXh0Q3Vyc29yOiBzdHJpbmcgfCBudWxsIH0+PjtcbiAgc3RhbGU6IENhY2hlRW50cnkgfCBudWxsO1xufTtcblxuZnVuY3Rpb24gZ2V0Q2FjaGVTdGF0ZSgpOiBDYWNoZVN0YXRlIHtcbiAgY29uc3QgZXhpc3RpbmcgPSAoZ2xvYmFsVGhpcyBhcyBhbnkpLl9fYWRtaW5PcmRlcnNBcGlDYWNoZSBhcyBDYWNoZVN0YXRlIHwgdW5kZWZpbmVkO1xuICBpZiAoZXhpc3RpbmcpIHJldHVybiBleGlzdGluZztcbiAgY29uc3QgY3JlYXRlZDogQ2FjaGVTdGF0ZSA9IHsgaG90Q2FjaGU6IG5ldyBNYXAoKSwgaW5mbGlnaHQ6IG5ldyBNYXAoKSwgc3RhbGU6IG51bGwgfTtcbiAgKGdsb2JhbFRoaXMgYXMgYW55KS5fX2FkbWluT3JkZXJzQXBpQ2FjaGUgPSBjcmVhdGVkO1xuICByZXR1cm4gY3JlYXRlZDtcbn1cblxuZnVuY3Rpb24gZ2V0U3VwYWJhc2VBZG1pbigpIHtcbiAgY29uc3QgZXhpc3RpbmcgPSAoZ2xvYmFsVGhpcyBhcyBhbnkpLl9fc3VwYWJhc2VBZG1pbjtcbiAgaWYgKGV4aXN0aW5nKSByZXR1cm4gZXhpc3Rpbmc7XG5cbiAgY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkw7XG4gIGNvbnN0IHN1cGFiYXNlU2VydmljZUtleSA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkgfHwgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVk7XG4gIGlmICghc3VwYWJhc2VVcmwgfHwgIXN1cGFiYXNlU2VydmljZUtleSkge1xuICAgIHRocm93IG5ldyBFcnJvcignU3VwYWJhc2UgZW52IGF1c2VudGUgKE5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCAvIE5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZKScpO1xuICB9XG5cbiAgY29uc3QgY3JlYXRlZCA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VTZXJ2aWNlS2V5LCB7XG4gICAgYXV0aDogeyBwZXJzaXN0U2Vzc2lvbjogZmFsc2UsIGF1dG9SZWZyZXNoVG9rZW46IGZhbHNlLCBkZXRlY3RTZXNzaW9uSW5Vcmw6IGZhbHNlIH0sXG4gIH0pO1xuICAoZ2xvYmFsVGhpcyBhcyBhbnkpLl9fc3VwYWJhc2VBZG1pbiA9IGNyZWF0ZWQ7XG4gIHJldHVybiBjcmVhdGVkO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcTogUmVxdWVzdCkge1xuICBjb25zdCBzdGFydGVkQXQgPSBEYXRlLm5vdygpO1xuICB0cnkge1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgY29uc3QgY2FjaGVTdGF0ZSA9IGdldENhY2hlU3RhdGUoKTtcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXEudXJsKTtcbiAgICBjb25zdCBpbmNsdWRlSXRlbXNSYXcgPSBTdHJpbmcoc2VhcmNoUGFyYW1zLmdldCgnaW5jbHVkZUl0ZW1zJykgfHwgJycpLnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3QgaW5jbHVkZUl0ZW1zID0gaW5jbHVkZUl0ZW1zUmF3ID09PSAnMScgfHwgaW5jbHVkZUl0ZW1zUmF3ID09PSAndHJ1ZSc7XG4gICAgY29uc3QgaWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCdpZCcpO1xuXG4gICAgY29uc3QgZGVmYXVsdExpbWl0ID0gaW5jbHVkZUl0ZW1zID8gNDAgOiAyMDtcbiAgICBjb25zdCBtYXhMaW1pdCA9IGluY2x1ZGVJdGVtcyA/IDYwIDogNDA7XG4gICAgY29uc3QgcmVxdWVzdGVkTGltaXQgPSBzZWFyY2hQYXJhbXMuZ2V0KCdsaW1pdCcpID09PSAnYWxsJyA/IDEwMDAwIDogTnVtYmVyKHNlYXJjaFBhcmFtcy5nZXQoJ2xpbWl0JykgfHwgU3RyaW5nKGRlZmF1bHRMaW1pdCkpO1xuICAgIGNvbnN0IGlzRmV0Y2hBbGwgPSBzZWFyY2hQYXJhbXMuZ2V0KCdsaW1pdCcpID09PSAnYWxsJztcbiAgICBjb25zdCBsaW1pdCA9IGlzRmV0Y2hBbGwgPyAxMDAwMCA6IChOdW1iZXIuaXNGaW5pdGUocmVxdWVzdGVkTGltaXQpID8gTWF0aC5taW4oTWF0aC5tYXgocmVxdWVzdGVkTGltaXQsIDEwKSwgbWF4TGltaXQpIDogZGVmYXVsdExpbWl0KTtcbiAgICBjb25zdCBjdXJzb3IgPSBzZWFyY2hQYXJhbXMuZ2V0KCdjdXJzb3InKTtcblxuICAgIGNvbnN0IGNhY2hlS2V5ID0gaWQgPyBgaWQ6JHtpZH06aXRlbXM6JHtpbmNsdWRlSXRlbXMgPyAxIDogMH1gIDogYGxpc3Q6JHtpc0ZldGNoQWxsID8gJ2FsbCcgOiBsaW1pdH06JHtjdXJzb3IgfHwgJyd9Oml0ZW1zOiR7aW5jbHVkZUl0ZW1zID8gMSA6IDB9YDtcbiAgICBjb25zdCBoaXQgPSBjYWNoZVN0YXRlLmhvdENhY2hlLmdldChjYWNoZUtleSk7XG4gICAgaWYgKGhpdCAmJiBub3cgLSBoaXQuYXQgPCBIT1RfVFRMX01TKSB7XG4gICAgICBjb25zdCByZXMgPSBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGhpdC5kYXRhLCBzb3VyY2U6IGhpdC5zb3VyY2UsIGN1cnNvcjogY3Vyc29yIHx8IG51bGwgfSk7XG4gICAgICByZXMuaGVhZGVycy5zZXQoJ3gtcmVzcG9uc2UtbXMnLCBTdHJpbmcoRGF0ZS5ub3coKSAtIHN0YXJ0ZWRBdCkpO1xuICAgICAgcmVzLmhlYWRlcnMuc2V0KCd4LWNhY2hlJywgJ0hJVCcpO1xuICAgICAgcmVjb3JkTWV0cmljKHsgYXQ6IERhdGUubm93KCksIG5hbWU6ICdHRVQgL2FwaS9hZG1pbi9vcmRlcnMnLCBtczogRGF0ZS5ub3coKSAtIHN0YXJ0ZWRBdCwgb2s6IHRydWUsIG1ldGE6IHsgY2FjaGU6ICdISVQnIH0gfSk7XG4gICAgICB2b2lkIG1heWJlQWxlcnQoeyBhdDogRGF0ZS5ub3coKSwgbmFtZTogJ0dFVCAvYXBpL2FkbWluL29yZGVycycsIG1zOiBEYXRlLm5vdygpIC0gc3RhcnRlZEF0LCBvazogdHJ1ZSwgbWV0YTogeyBjYWNoZTogJ0hJVCcgfSB9KTtcbiAgICAgIHJldHVybiByZXM7XG4gICAgfVxuXG4gICAgY29uc3QgZXhpc3RpbmcgPSBjYWNoZVN0YXRlLmluZmxpZ2h0LmdldChjYWNoZUtleSk7XG4gICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICBpZiAoY2FjaGVTdGF0ZS5zdGFsZSAmJiBub3cgLSBjYWNoZVN0YXRlLnN0YWxlLmF0IDwgU1RBTEVfVFRMX01TKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IGNhY2hlU3RhdGUuc3RhbGUuZGF0YSxcbiAgICAgICAgICBzb3VyY2U6IGAke2NhY2hlU3RhdGUuc3RhbGUuc291cmNlfV9zdGFsZWAsXG4gICAgICAgICAgY3Vyc29yOiBjdXJzb3IgfHwgbnVsbCxcbiAgICAgICAgfSk7XG4gICAgICAgIHJlcy5oZWFkZXJzLnNldCgneC1yZXNwb25zZS1tcycsIFN0cmluZyhEYXRlLm5vdygpIC0gc3RhcnRlZEF0KSk7XG4gICAgICAgIHJlcy5oZWFkZXJzLnNldCgneC1jYWNoZScsICdTVEFMRScpO1xuICAgICAgICByZWNvcmRNZXRyaWMoeyBhdDogRGF0ZS5ub3coKSwgbmFtZTogJ0dFVCAvYXBpL2FkbWluL29yZGVycycsIG1zOiBEYXRlLm5vdygpIC0gc3RhcnRlZEF0LCBvazogdHJ1ZSwgbWV0YTogeyBjYWNoZTogJ1NUQUxFJywgaW5mbGlnaHQ6IHRydWUgfSB9KTtcbiAgICAgICAgdm9pZCBtYXliZUFsZXJ0KHsgYXQ6IERhdGUubm93KCksIG5hbWU6ICdHRVQgL2FwaS9hZG1pbi9vcmRlcnMnLCBtczogRGF0ZS5ub3coKSAtIHN0YXJ0ZWRBdCwgb2s6IHRydWUsIG1ldGE6IHsgY2FjaGU6ICdTVEFMRScsIGluZmxpZ2h0OiB0cnVlIH0gfSk7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHIgPSBhd2FpdCBleGlzdGluZztcbiAgICAgIGNvbnN0IHJlcyA9IE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogci5lbnRyeS5kYXRhLCBzb3VyY2U6IHIuZW50cnkuc291cmNlLCBjdXJzb3I6IGN1cnNvciB8fCBudWxsLCBuZXh0Q3Vyc29yOiByLm5leHRDdXJzb3IgfSk7XG4gICAgICByZXMuaGVhZGVycy5zZXQoJ3gtcmVzcG9uc2UtbXMnLCBTdHJpbmcoRGF0ZS5ub3coKSAtIHN0YXJ0ZWRBdCkpO1xuICAgICAgcmVzLmhlYWRlcnMuc2V0KCd4LWNhY2hlJywgJ0NPQUxFU0NFRCcpO1xuICAgICAgcmVjb3JkTWV0cmljKHsgYXQ6IERhdGUubm93KCksIG5hbWU6ICdHRVQgL2FwaS9hZG1pbi9vcmRlcnMnLCBtczogRGF0ZS5ub3coKSAtIHN0YXJ0ZWRBdCwgb2s6IHRydWUsIG1ldGE6IHsgY2FjaGU6ICdDT0FMRVNDRUQnIH0gfSk7XG4gICAgICB2b2lkIG1heWJlQWxlcnQoeyBhdDogRGF0ZS5ub3coKSwgbmFtZTogJ0dFVCAvYXBpL2FkbWluL29yZGVycycsIG1zOiBEYXRlLm5vdygpIC0gc3RhcnRlZEF0LCBvazogdHJ1ZSwgbWV0YTogeyBjYWNoZTogJ0NPQUxFU0NFRCcgfSB9KTtcbiAgICAgIHJldHVybiByZXM7XG4gICAgfVxuXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUFkbWluKCk7XG5cbiAgICBpZiAoaWQpIHtcbiAgICAgIGNvbnN0IHdvcmsgPSAoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCByb3cgPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCdvcmRlcnMnKS5zZWxlY3QoJyonKS5lcSgnaWQnLCBpZCkubWF5YmVTaW5nbGUoKTtcbiAgICAgICAgaWYgKHJvdy5lcnJvcikgdGhyb3cgcm93LmVycm9yO1xuICAgICAgICBpZiAoIXJvdy5kYXRhKSB0aHJvdyBuZXcgRXJyb3IoJ1BlZGlkbyBuw6NvIGVuY29udHJhZG8nKTtcbiAgICAgICAgY29uc3QgbWFwcGVkID0gbWFwRGJPcmRlclRvT3JkZXIocm93LmRhdGEpO1xuICAgICAgICBjb25zdCBlbnRyeTogQ2FjaGVFbnRyeSA9IHsgYXQ6IG5vdywgZGF0YTogW21hcHBlZF0sIHNvdXJjZTogJ2J5X2lkJyB9O1xuICAgICAgICByZXR1cm4geyBlbnRyeSwgbmV4dEN1cnNvcjogbnVsbCB9O1xuICAgICAgfSkoKTtcblxuICAgICAgY2FjaGVTdGF0ZS5pbmZsaWdodC5zZXQoY2FjaGVLZXksIHdvcmspO1xuICAgICAgY29uc3QgeyBlbnRyeSB9ID0gYXdhaXQgd29yay5maW5hbGx5KCgpID0+IGNhY2hlU3RhdGUuaW5mbGlnaHQuZGVsZXRlKGNhY2hlS2V5KSk7XG4gICAgICBjYWNoZVN0YXRlLmhvdENhY2hlLnNldChjYWNoZUtleSwgZW50cnkpO1xuICAgICAgY2FjaGVTdGF0ZS5zdGFsZSA9IGVudHJ5O1xuXG4gICAgICBjb25zdCByZXMgPSBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGVudHJ5LmRhdGFbMF0sIHNvdXJjZTogZW50cnkuc291cmNlIH0pO1xuICAgICAgcmVzLmhlYWRlcnMuc2V0KCd4LXJlc3BvbnNlLW1zJywgU3RyaW5nKERhdGUubm93KCkgLSBzdGFydGVkQXQpKTtcbiAgICAgIHJlcy5oZWFkZXJzLnNldCgneC1jYWNoZScsICdNSVNTJyk7XG4gICAgICByZWNvcmRNZXRyaWMoeyBhdDogRGF0ZS5ub3coKSwgbmFtZTogJ0dFVCAvYXBpL2FkbWluL29yZGVycycsIG1zOiBEYXRlLm5vdygpIC0gc3RhcnRlZEF0LCBvazogdHJ1ZSwgbWV0YTogeyBzb3VyY2U6IGVudHJ5LnNvdXJjZSB9IH0pO1xuICAgICAgdm9pZCBtYXliZUFsZXJ0KHsgYXQ6IERhdGUubm93KCksIG5hbWU6ICdHRVQgL2FwaS9hZG1pbi9vcmRlcnMnLCBtczogRGF0ZS5ub3coKSAtIHN0YXJ0ZWRBdCwgb2s6IHRydWUsIG1ldGE6IHsgc291cmNlOiBlbnRyeS5zb3VyY2UgfSB9KTtcbiAgICAgIHJldHVybiByZXM7XG4gICAgfVxuXG4gICAgY29uc3Qgc2VsZWN0TGlzdCA9IGluY2x1ZGVJdGVtc1xuICAgICAgPyAnaWQsY3VzdG9tZXIsaXRlbXMsdG90YWwsZGlzY291bnQsZG93blBheW1lbnQsaW5zdGFsbG1lbnRzLGluc3RhbGxtZW50VmFsdWUsZGF0ZSxmaXJzdER1ZURhdGUsc3RhdHVzLHBheW1lbnRNZXRob2QsaW5zdGFsbG1lbnREZXRhaWxzLHNlbGxlcklkLHNlbGxlck5hbWUsY29tbWlzc2lvbixjb21taXNzaW9uUGFpZCxpc0NvbW1pc3Npb25NYW51YWwsb2JzZXJ2YXRpb25zLHNvdXJjZSxjcmVhdGVkX2F0LHVwZGF0ZWRfYXQnXG4gICAgICA6ICdpZCxjdXN0b21lcixpdGVtcyx0b3RhbCxkaXNjb3VudCxkb3duUGF5bWVudCxpbnN0YWxsbWVudHMsaW5zdGFsbG1lbnRWYWx1ZSxkYXRlLGZpcnN0RHVlRGF0ZSxzdGF0dXMscGF5bWVudE1ldGhvZCxpbnN0YWxsbWVudERldGFpbHMsc2VsbGVySWQsc2VsbGVyTmFtZSxjb21taXNzaW9uLGNvbW1pc3Npb25QYWlkLGlzQ29tbWlzc2lvbk1hbnVhbCxzb3VyY2UsY3JlYXRlZF9hdCx1cGRhdGVkX2F0JztcblxuICAgIGNvbnN0IHdvcmsgPSAoYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY291bnRSZXMgPSAhY3Vyc29yID8gYXdhaXQgc3VwYWJhc2UuZnJvbSgnb3JkZXJzJykuc2VsZWN0KCdpZCcsIHsgY291bnQ6ICdleGFjdCcsIGhlYWQ6IHRydWUgfSkgOiBudWxsO1xuICAgICAgY29uc3QgdG90YWxDb3VudCA9IGNvdW50UmVzPy5jb3VudCB8fCBudWxsO1xuXG4gICAgICBjb25zdCBwYXJzZUN1cnNvciA9IChyYXc6IHN0cmluZyB8IG51bGwpID0+IHtcbiAgICAgICAgaWYgKCFyYXcpIHJldHVybiB7IGRhdGU6IG51bGwgYXMgc3RyaW5nIHwgbnVsbCwgaWQ6IG51bGwgYXMgc3RyaW5nIHwgbnVsbCB9O1xuICAgICAgICBjb25zdCBzID0gU3RyaW5nKHJhdyk7XG4gICAgICAgIGNvbnN0IGlkeCA9IHMubGFzdEluZGV4T2YoJ3wnKTtcbiAgICAgICAgaWYgKGlkeCA+IDAgJiYgaWR4IDwgcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgcmV0dXJuIHsgZGF0ZTogcy5zbGljZSgwLCBpZHgpLCBpZDogcy5zbGljZShpZHggKyAxKSB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGRhdGU6IHMsIGlkOiBudWxsIH07XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBjdXJzb3JQYXJzZWQgPSBwYXJzZUN1cnNvcihjdXJzb3IpO1xuICAgICAgY29uc3QgY3Vyc29yRGF0ZSA9IGN1cnNvclBhcnNlZC5kYXRlO1xuICAgICAgY29uc3QgY3Vyc29ySWQgPSBjdXJzb3JQYXJzZWQuaWQ7XG4gICAgICBjb25zdCBjdXJzb3JUaW1lID0gY3Vyc29yRGF0ZSA/IERhdGUucGFyc2UoY3Vyc29yRGF0ZSkgOiBOYU47XG5cbiAgICAgIGNvbnN0IG92ZXJmZXRjaExpbWl0ID0gTWF0aC5taW4obGltaXQgKiAyLCAxMjApO1xuICAgICAgY29uc3QgaWRQYWdlUmF3ID0gY3Vyc29yRGF0ZVxuICAgICAgICA/IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgICAuZnJvbSgnb3JkZXJzJylcbiAgICAgICAgICAgIC5zZWxlY3QoJ2lkLGRhdGUnKVxuICAgICAgICAgICAgLmx0ZSgnZGF0ZScsIGN1cnNvckRhdGUpXG4gICAgICAgICAgICAub3JkZXIoJ2RhdGUnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcbiAgICAgICAgICAgIC5vcmRlcignaWQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcbiAgICAgICAgICAgIC5saW1pdChvdmVyZmV0Y2hMaW1pdClcbiAgICAgICAgOiBhd2FpdCBzdXBhYmFzZS5mcm9tKCdvcmRlcnMnKS5zZWxlY3QoJ2lkLGRhdGUnKS5vcmRlcignZGF0ZScsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KS5vcmRlcignaWQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSkubGltaXQobGltaXQpO1xuICAgICAgaWYgKGlkUGFnZVJhdy5lcnJvcikgdGhyb3cgaWRQYWdlUmF3LmVycm9yO1xuICAgICAgbGV0IGlkUGFnZSA9IChpZFBhZ2VSYXcuZGF0YSB8fCBbXSkgYXMgYW55W107XG4gICAgICBpZiAoY3Vyc29yRGF0ZSkge1xuICAgICAgICBpZFBhZ2UgPSBpZFBhZ2UuZmlsdGVyKChyKSA9PiB7XG4gICAgICAgICAgY29uc3Qgcm93RGF0ZSA9IFN0cmluZyhyPy5kYXRlIHx8ICcnKTtcbiAgICAgICAgICBjb25zdCByb3dJZCA9IFN0cmluZyhyPy5pZCB8fCAnJyk7XG4gICAgICAgICAgY29uc3Qgcm93VGltZSA9IERhdGUucGFyc2Uocm93RGF0ZSk7XG5cbiAgICAgICAgICBpZiAoTnVtYmVyLmlzRmluaXRlKGN1cnNvclRpbWUpICYmIE51bWJlci5pc0Zpbml0ZShyb3dUaW1lKSkge1xuICAgICAgICAgICAgaWYgKHJvd1RpbWUgPCBjdXJzb3JUaW1lKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChyb3dUaW1lID4gY3Vyc29yVGltZSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIGN1cnNvcklkID8gcm93SWQgPCBjdXJzb3JJZCA6IGZhbHNlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChyb3dEYXRlIDwgY3Vyc29yRGF0ZSkgcmV0dXJuIHRydWU7XG4gICAgICAgICAgaWYgKHJvd0RhdGUgPiBjdXJzb3JEYXRlKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgcmV0dXJuIGN1cnNvcklkID8gcm93SWQgPCBjdXJzb3JJZCA6IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlkUGFnZSA9IGlkUGFnZS5zbGljZSgwLCBsaW1pdCk7XG5cbiAgICAgIGNvbnN0IGlkczogc3RyaW5nW10gPSBpZFBhZ2UubWFwKChyOiBhbnkpID0+IFN0cmluZyhyLmlkKSkuZmlsdGVyKCh2OiBzdHJpbmcpID0+IEJvb2xlYW4odikpO1xuICAgICAgaWYgKGlkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc3QgZW50cnk6IENhY2hlRW50cnkgPSB7IGF0OiBub3csIGRhdGE6IFtdLCBzb3VyY2U6ICdieV9kYXRlX2lkcycgfTtcbiAgICAgICAgcmV0dXJuIHsgZW50cnksIG5leHRDdXJzb3I6IG51bGwgfTtcbiAgICAgIH1cblxuXG4gICAgICBjb25zdCBmZXRjaENodW5rID0gYXN5bmMgKGNodW5rOiBzdHJpbmdbXSk6IFByb21pc2U8YW55W10+ID0+IHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgnb3JkZXJzJykuc2VsZWN0KHNlbGVjdExpc3QpLmluKCdpZCcsIGNodW5rKTtcbiAgICAgICAgaWYgKCFyZXMuZXJyb3IpIHJldHVybiByZXMuZGF0YSB8fCBbXTtcbiAgICAgICAgY29uc3QgbXNnID0gU3RyaW5nKHJlcy5lcnJvci5tZXNzYWdlIHx8ICcnKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBpZiAobXNnLmluY2x1ZGVzKCdzdGF0ZW1lbnQgdGltZW91dCcpICYmIGNodW5rLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICBjb25zdCBtaWQgPSBNYXRoLmNlaWwoY2h1bmsubGVuZ3RoIC8gMik7XG4gICAgICAgICAgY29uc3QgbGVmdCA9IGF3YWl0IGZldGNoQ2h1bmsoY2h1bmsuc2xpY2UoMCwgbWlkKSk7XG4gICAgICAgICAgY29uc3QgcmlnaHQgPSBhd2FpdCBmZXRjaENodW5rKGNodW5rLnNsaWNlKG1pZCkpO1xuICAgICAgICAgIHJldHVybiBbLi4ubGVmdCwgLi4ucmlnaHRdO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IHJlcy5lcnJvcjtcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGJ5SWQgPSBuZXcgTWFwPHN0cmluZywgYW55PigpO1xuICAgICAgY29uc3QgY2h1bmtTaXplID0gMTU7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlkcy5sZW5ndGg7IGkgKz0gY2h1bmtTaXplKSB7XG4gICAgICAgIGNvbnN0IGNodW5rID0gaWRzLnNsaWNlKGksIGkgKyBjaHVua1NpemUpO1xuICAgICAgICBjb25zdCByb3dzID0gYXdhaXQgZmV0Y2hDaHVuayhjaHVuayk7XG4gICAgICAgIGZvciAoY29uc3QgciBvZiByb3dzKSB7XG4gICAgICAgICAgYnlJZC5zZXQoU3RyaW5nKChyIGFzIGFueSkuaWQpLCByKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3Qgb3JkZXJlZFJvd3MgPSBpZHMubWFwKChpZCkgPT4gYnlJZC5nZXQoaWQpKS5maWx0ZXIoQm9vbGVhbik7XG5cbiAgICAgIGNvbnN0IG1hcHBlZCA9IG9yZGVyZWRSb3dzLm1hcChtYXBEYk9yZGVyVG9PcmRlcik7XG4gICAgICBjb25zdCBsYXN0ID0gaWRQYWdlW2lkUGFnZS5sZW5ndGggLSAxXTtcbiAgICAgIGNvbnN0IG5leHRDdXJzb3IgPSBsYXN0Py5kYXRlICYmIGxhc3Q/LmlkID8gYCR7U3RyaW5nKGxhc3QuZGF0ZSl9fCR7U3RyaW5nKGxhc3QuaWQpfWAgOiBudWxsO1xuICAgICAgY29uc3QgZW50cnk6IENhY2hlRW50cnkgPSB7IGF0OiBub3csIGRhdGE6IG1hcHBlZCwgc291cmNlOiAnYnlfZGF0ZV9pZHMnIH07XG4gICAgICByZXR1cm4geyBlbnRyeSwgbmV4dEN1cnNvciwgdG90YWxDb3VudCB9O1xuICAgIH0pKCk7XG5cbiAgICBjYWNoZVN0YXRlLmluZmxpZ2h0LnNldChjYWNoZUtleSwgd29yayk7XG4gICAgY29uc3QgeyBlbnRyeSwgbmV4dEN1cnNvciwgdG90YWxDb3VudCB9ID0gYXdhaXQgd29yay5maW5hbGx5KCgpID0+IGNhY2hlU3RhdGUuaW5mbGlnaHQuZGVsZXRlKGNhY2hlS2V5KSk7XG5cbiAgICBjYWNoZVN0YXRlLmhvdENhY2hlLnNldChjYWNoZUtleSwgZW50cnkpO1xuICAgIGNhY2hlU3RhdGUuc3RhbGUgPSBlbnRyeTtcblxuICAgIGNvbnN0IHJlcyA9IE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogZW50cnkuZGF0YSwgc291cmNlOiBlbnRyeS5zb3VyY2UsIGN1cnNvcjogY3Vyc29yIHx8IG51bGwsIG5leHRDdXJzb3IsIHRvdGFsQ291bnQgfSk7XG4gICAgcmVzLmhlYWRlcnMuc2V0KCd4LXJlc3BvbnNlLW1zJywgU3RyaW5nKERhdGUubm93KCkgLSBzdGFydGVkQXQpKTtcbiAgICByZXMuaGVhZGVycy5zZXQoJ3gtY2FjaGUnLCAnTUlTUycpO1xuICAgIHdoaWxlIChjYWNoZVN0YXRlLmhvdENhY2hlLnNpemUgPiAyMDApIHtcbiAgICAgIGNvbnN0IGZpcnN0S2V5ID0gY2FjaGVTdGF0ZS5ob3RDYWNoZS5rZXlzKCkubmV4dCgpLnZhbHVlIGFzIHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICAgIGlmICghZmlyc3RLZXkpIGJyZWFrO1xuICAgICAgY2FjaGVTdGF0ZS5ob3RDYWNoZS5kZWxldGUoZmlyc3RLZXkpO1xuICAgIH1cbiAgICByZWNvcmRNZXRyaWMoeyBhdDogRGF0ZS5ub3coKSwgbmFtZTogJ0dFVCAvYXBpL2FkbWluL29yZGVycycsIG1zOiBEYXRlLm5vdygpIC0gc3RhcnRlZEF0LCBvazogdHJ1ZSwgbWV0YTogeyBzb3VyY2U6IGVudHJ5LnNvdXJjZSB9IH0pO1xuICAgIHZvaWQgbWF5YmVBbGVydCh7IGF0OiBEYXRlLm5vdygpLCBuYW1lOiAnR0VUIC9hcGkvYWRtaW4vb3JkZXJzJywgbXM6IERhdGUubm93KCkgLSBzdGFydGVkQXQsIG9rOiB0cnVlLCBtZXRhOiB7IHNvdXJjZTogZW50cnkuc291cmNlIH0gfSk7XG4gICAgcmV0dXJuIHJlcztcbiAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBtcyA9IG5vdyAtIHN0YXJ0ZWRBdDtcbiAgICByZWNvcmRNZXRyaWMoeyBhdDogbm93LCBuYW1lOiAnR0VUIC9hcGkvYWRtaW4vb3JkZXJzJywgbXMsIG9rOiBmYWxzZSwgbWV0YTogeyBlcnJvcjogZT8ubWVzc2FnZSB9IH0pO1xuICAgIHZvaWQgbWF5YmVBbGVydCh7IGF0OiBub3csIG5hbWU6ICdHRVQgL2FwaS9hZG1pbi9vcmRlcnMnLCBtcywgb2s6IGZhbHNlLCBtZXRhOiB7IGVycm9yOiBlPy5tZXNzYWdlIH0gfSk7XG5cbiAgICBjb25zdCBjYWNoZVN0YXRlID0gZ2V0Q2FjaGVTdGF0ZSgpO1xuICAgIGlmIChjYWNoZVN0YXRlLnN0YWxlICYmIG5vdyAtIGNhY2hlU3RhdGUuc3RhbGUuYXQgPCBTVEFMRV9UVExfTVMpIHtcbiAgICAgIGNvbnN0IHJlcyA9IE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogY2FjaGVTdGF0ZS5zdGFsZS5kYXRhLFxuICAgICAgICBzb3VyY2U6IGAke2NhY2hlU3RhdGUuc3RhbGUuc291cmNlfV9zdGFsZWAsXG4gICAgICB9KTtcbiAgICAgIHJlcy5oZWFkZXJzLnNldCgneC1yZXNwb25zZS1tcycsIFN0cmluZyhtcykpO1xuICAgICAgcmVzLmhlYWRlcnMuc2V0KCd4LWNhY2hlJywgJ1NUQUxFJyk7XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZT8ubWVzc2FnZSB8fCAnRmFsaGEgYW8gYnVzY2FyIHBlZGlkb3MnIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJjcmVhdGVDbGllbnQiLCJtYXBEYk9yZGVyVG9PcmRlciIsIm1heWJlQWxlcnQiLCJyZWNvcmRNZXRyaWMiLCJkeW5hbWljIiwiSE9UX1RUTF9NUyIsIlNUQUxFX1RUTF9NUyIsImdldENhY2hlU3RhdGUiLCJleGlzdGluZyIsImdsb2JhbFRoaXMiLCJfX2FkbWluT3JkZXJzQXBpQ2FjaGUiLCJjcmVhdGVkIiwiaG90Q2FjaGUiLCJNYXAiLCJpbmZsaWdodCIsInN0YWxlIiwiZ2V0U3VwYWJhc2VBZG1pbiIsIl9fc3VwYWJhc2VBZG1pbiIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlU2VydmljZUtleSIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsIkVycm9yIiwiYXV0aCIsInBlcnNpc3RTZXNzaW9uIiwiYXV0b1JlZnJlc2hUb2tlbiIsImRldGVjdFNlc3Npb25JblVybCIsIkdFVCIsInJlcSIsInN0YXJ0ZWRBdCIsIkRhdGUiLCJub3ciLCJjYWNoZVN0YXRlIiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwiaW5jbHVkZUl0ZW1zUmF3IiwiU3RyaW5nIiwiZ2V0IiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlSXRlbXMiLCJpZCIsImRlZmF1bHRMaW1pdCIsIm1heExpbWl0IiwicmVxdWVzdGVkTGltaXQiLCJOdW1iZXIiLCJpc0ZldGNoQWxsIiwibGltaXQiLCJpc0Zpbml0ZSIsIk1hdGgiLCJtaW4iLCJtYXgiLCJjdXJzb3IiLCJjYWNoZUtleSIsImhpdCIsImF0IiwicmVzIiwianNvbiIsInN1Y2Nlc3MiLCJkYXRhIiwic291cmNlIiwiaGVhZGVycyIsInNldCIsIm5hbWUiLCJtcyIsIm9rIiwibWV0YSIsImNhY2hlIiwiciIsImVudHJ5IiwibmV4dEN1cnNvciIsInN1cGFiYXNlIiwid29yayIsInJvdyIsImZyb20iLCJzZWxlY3QiLCJlcSIsIm1heWJlU2luZ2xlIiwiZXJyb3IiLCJtYXBwZWQiLCJmaW5hbGx5IiwiZGVsZXRlIiwic2VsZWN0TGlzdCIsImNvdW50UmVzIiwiY291bnQiLCJoZWFkIiwidG90YWxDb3VudCIsInBhcnNlQ3Vyc29yIiwicmF3IiwiZGF0ZSIsInMiLCJpZHgiLCJsYXN0SW5kZXhPZiIsImxlbmd0aCIsInNsaWNlIiwiY3Vyc29yUGFyc2VkIiwiY3Vyc29yRGF0ZSIsImN1cnNvcklkIiwiY3Vyc29yVGltZSIsInBhcnNlIiwiTmFOIiwib3ZlcmZldGNoTGltaXQiLCJpZFBhZ2VSYXciLCJsdGUiLCJvcmRlciIsImFzY2VuZGluZyIsImlkUGFnZSIsImZpbHRlciIsInJvd0RhdGUiLCJyb3dJZCIsInJvd1RpbWUiLCJpZHMiLCJtYXAiLCJ2IiwiQm9vbGVhbiIsImZldGNoQ2h1bmsiLCJjaHVuayIsImluIiwibXNnIiwibWVzc2FnZSIsImluY2x1ZGVzIiwibWlkIiwiY2VpbCIsImxlZnQiLCJyaWdodCIsImJ5SWQiLCJjaHVua1NpemUiLCJpIiwicm93cyIsIm9yZGVyZWRSb3dzIiwibGFzdCIsInNpemUiLCJmaXJzdEtleSIsImtleXMiLCJuZXh0IiwidmFsdWUiLCJlIiwic3RhdHVzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/admin/orders/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/monitoring.ts":
/*!*******************************!*\
  !*** ./src/lib/monitoring.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   listMetrics: () => (/* binding */ listMetrics),\n/* harmony export */   maybeAlert: () => (/* binding */ maybeAlert),\n/* harmony export */   recordMetric: () => (/* binding */ recordMetric)\n/* harmony export */ });\nconst MAX_METRICS = 500;\nconst metrics = [];\nfunction recordMetric(metric) {\n    metrics.push(metric);\n    if (metrics.length > MAX_METRICS) metrics.splice(0, metrics.length - MAX_METRICS);\n}\nfunction listMetrics(limit = 100) {\n    const n = Math.min(Math.max(limit, 1), MAX_METRICS);\n    return metrics.slice(-n).reverse();\n}\nasync function maybeAlert(metric) {\n    if (metric.ms <= 3000) return;\n    const webhook = process.env.ALERT_WEBHOOK_URL;\n    if (!webhook) {\n        console.warn(`[ALERT] Slow response: ${metric.name} ${metric.ms}ms`);\n        return;\n    }\n    try {\n        await fetch(webhook, {\n            method: 'POST',\n            headers: {\n                'content-type': 'application/json'\n            },\n            body: JSON.stringify({\n                type: 'latency_alert',\n                at: new Date(metric.at).toISOString(),\n                name: metric.name,\n                ms: metric.ms,\n                ok: metric.ok,\n                meta: metric.meta || {}\n            })\n        });\n    } catch  {}\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL21vbml0b3JpbmcudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBUUEsTUFBTUEsY0FBYztBQUNwQixNQUFNQyxVQUFvQixFQUFFO0FBRXJCLFNBQVNDLGFBQWFDLE1BQWM7SUFDekNGLFFBQVFHLElBQUksQ0FBQ0Q7SUFDYixJQUFJRixRQUFRSSxNQUFNLEdBQUdMLGFBQWFDLFFBQVFLLE1BQU0sQ0FBQyxHQUFHTCxRQUFRSSxNQUFNLEdBQUdMO0FBQ3ZFO0FBRU8sU0FBU08sWUFBWUMsUUFBUSxHQUFHO0lBQ3JDLE1BQU1DLElBQUlDLEtBQUtDLEdBQUcsQ0FBQ0QsS0FBS0UsR0FBRyxDQUFDSixPQUFPLElBQUlSO0lBQ3ZDLE9BQU9DLFFBQVFZLEtBQUssQ0FBQyxDQUFDSixHQUFHSyxPQUFPO0FBQ2xDO0FBRU8sZUFBZUMsV0FBV1osTUFBYztJQUM3QyxJQUFJQSxPQUFPYSxFQUFFLElBQUksTUFBTTtJQUV2QixNQUFNQyxVQUFVQyxRQUFRQyxHQUFHLENBQUNDLGlCQUFpQjtJQUM3QyxJQUFJLENBQUNILFNBQVM7UUFDWkksUUFBUUMsSUFBSSxDQUFDLENBQUMsdUJBQXVCLEVBQUVuQixPQUFPb0IsSUFBSSxDQUFDLENBQUMsRUFBRXBCLE9BQU9hLEVBQUUsQ0FBQyxFQUFFLENBQUM7UUFDbkU7SUFDRjtJQUVBLElBQUk7UUFDRixNQUFNUSxNQUFNUCxTQUFTO1lBQ25CUSxRQUFRO1lBQ1JDLFNBQVM7Z0JBQUUsZ0JBQWdCO1lBQW1CO1lBQzlDQyxNQUFNQyxLQUFLQyxTQUFTLENBQUM7Z0JBQ25CQyxNQUFNO2dCQUNOQyxJQUFJLElBQUlDLEtBQUs3QixPQUFPNEIsRUFBRSxFQUFFRSxXQUFXO2dCQUNuQ1YsTUFBTXBCLE9BQU9vQixJQUFJO2dCQUNqQlAsSUFBSWIsT0FBT2EsRUFBRTtnQkFDYmtCLElBQUkvQixPQUFPK0IsRUFBRTtnQkFDYkMsTUFBTWhDLE9BQU9nQyxJQUFJLElBQUksQ0FBQztZQUN4QjtRQUNGO0lBQ0YsRUFBRSxPQUFNLENBQ1I7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxSYWZhZWxcXERlc2t0b3BcXEFEQy1QUk8tMjAyNi1tYWluXFxzcmNcXGxpYlxcbW9uaXRvcmluZy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJ0eXBlIE1ldHJpYyA9IHtcbiAgYXQ6IG51bWJlcjtcbiAgbmFtZTogc3RyaW5nO1xuICBtczogbnVtYmVyO1xuICBvazogYm9vbGVhbjtcbiAgbWV0YT86IFJlY29yZDxzdHJpbmcsIGFueT47XG59O1xuXG5jb25zdCBNQVhfTUVUUklDUyA9IDUwMDtcbmNvbnN0IG1ldHJpY3M6IE1ldHJpY1tdID0gW107XG5cbmV4cG9ydCBmdW5jdGlvbiByZWNvcmRNZXRyaWMobWV0cmljOiBNZXRyaWMpIHtcbiAgbWV0cmljcy5wdXNoKG1ldHJpYyk7XG4gIGlmIChtZXRyaWNzLmxlbmd0aCA+IE1BWF9NRVRSSUNTKSBtZXRyaWNzLnNwbGljZSgwLCBtZXRyaWNzLmxlbmd0aCAtIE1BWF9NRVRSSUNTKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RNZXRyaWNzKGxpbWl0ID0gMTAwKSB7XG4gIGNvbnN0IG4gPSBNYXRoLm1pbihNYXRoLm1heChsaW1pdCwgMSksIE1BWF9NRVRSSUNTKTtcbiAgcmV0dXJuIG1ldHJpY3Muc2xpY2UoLW4pLnJldmVyc2UoKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1heWJlQWxlcnQobWV0cmljOiBNZXRyaWMpIHtcbiAgaWYgKG1ldHJpYy5tcyA8PSAzMDAwKSByZXR1cm47XG5cbiAgY29uc3Qgd2ViaG9vayA9IHByb2Nlc3MuZW52LkFMRVJUX1dFQkhPT0tfVVJMO1xuICBpZiAoIXdlYmhvb2spIHtcbiAgICBjb25zb2xlLndhcm4oYFtBTEVSVF0gU2xvdyByZXNwb25zZTogJHttZXRyaWMubmFtZX0gJHttZXRyaWMubXN9bXNgKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB0cnkge1xuICAgIGF3YWl0IGZldGNoKHdlYmhvb2ssIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczogeyAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHR5cGU6ICdsYXRlbmN5X2FsZXJ0JyxcbiAgICAgICAgYXQ6IG5ldyBEYXRlKG1ldHJpYy5hdCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgbmFtZTogbWV0cmljLm5hbWUsXG4gICAgICAgIG1zOiBtZXRyaWMubXMsXG4gICAgICAgIG9rOiBtZXRyaWMub2ssXG4gICAgICAgIG1ldGE6IG1ldHJpYy5tZXRhIHx8IHt9LFxuICAgICAgfSksXG4gICAgfSk7XG4gIH0gY2F0Y2gge1xuICB9XG59XG5cbiJdLCJuYW1lcyI6WyJNQVhfTUVUUklDUyIsIm1ldHJpY3MiLCJyZWNvcmRNZXRyaWMiLCJtZXRyaWMiLCJwdXNoIiwibGVuZ3RoIiwic3BsaWNlIiwibGlzdE1ldHJpY3MiLCJsaW1pdCIsIm4iLCJNYXRoIiwibWluIiwibWF4Iiwic2xpY2UiLCJyZXZlcnNlIiwibWF5YmVBbGVydCIsIm1zIiwid2ViaG9vayIsInByb2Nlc3MiLCJlbnYiLCJBTEVSVF9XRUJIT09LX1VSTCIsImNvbnNvbGUiLCJ3YXJuIiwibmFtZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidHlwZSIsImF0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwib2siLCJtZXRhIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/monitoring.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase-mappers.ts":
/*!*************************************!*\
  !*** ./src/lib/supabase-mappers.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mapDbOrderToOrder: () => (/* binding */ mapDbOrderToOrder),\n/* harmony export */   mapOrderPatchToDb: () => (/* binding */ mapOrderPatchToDb)\n/* harmony export */ });\nfunction mapDbOrderToOrder(row) {\n    const firstDueRaw = row.first_due_date ?? row.firstDueDate;\n    const firstDueDate = firstDueRaw ? new Date(firstDueRaw) : undefined;\n    const itemsRaw = row.items;\n    const items = Array.isArray(itemsRaw) ? itemsRaw : [];\n    return {\n        id: row.id,\n        customer: row.customer,\n        items,\n        total: row.total,\n        subtotal: row.subtotal ?? undefined,\n        discount: row.discount ?? undefined,\n        downPayment: row.down_payment ?? row.downPayment ?? undefined,\n        deliveryFee: row.delivery_fee ?? row.deliveryFee ?? undefined,\n        installments: row.installments ?? 0,\n        installmentValue: row.installment_value ?? row.installmentValue ?? 0,\n        date: row.date,\n        firstDueDate,\n        status: row.status,\n        paymentMethod: row.payment_method ?? row.paymentMethod,\n        installmentDetails: row.installment_details ?? row.installmentDetails ?? [],\n        installmentCardDetails: row.installment_card_details ?? row.installmentCardDetails ?? undefined,\n        trackingCode: row.tracking_code ?? row.trackingCode ?? undefined,\n        attachments: row.attachments ?? undefined,\n        sellerId: row.seller_id ?? row.sellerId ?? undefined,\n        sellerName: row.seller_name ?? row.sellerName ?? undefined,\n        commission: row.commission ?? undefined,\n        commissionDate: row.commission_date ?? row.commissionDate ?? undefined,\n        commissionPaid: row.commission_paid ?? row.commissionPaid ?? undefined,\n        isCommissionManual: row.is_commission_manual ?? row.isCommissionManual ?? undefined,\n        observations: row.observations ?? undefined,\n        source: row.source ?? undefined,\n        createdAt: row.created_at ?? row.createdAt ?? undefined,\n        createdById: row.created_by_id ?? row.createdById ?? undefined,\n        createdByName: row.created_by_name ?? row.createdByName ?? undefined,\n        createdByRole: row.created_by_role ?? row.createdByRole ?? undefined,\n        createdIp: row.created_ip ?? row.createdIp ?? undefined,\n        asaas: row.asaas ?? undefined\n    };\n}\nfunction mapOrderPatchToDb(patch, style = 'camel') {\n    const out = {};\n    if (patch.status !== undefined) out.status = patch.status;\n    if (patch.customer !== undefined) out.customer = patch.customer;\n    if (patch.items !== undefined) out.items = patch.items;\n    if (patch.total !== undefined) out.total = patch.total;\n    if (patch.subtotal !== undefined) out.subtotal = patch.subtotal;\n    if (patch.discount !== undefined) out.discount = patch.discount;\n    if (patch.downPayment !== undefined) out[style === 'snake' ? 'down_payment' : 'downPayment'] = patch.downPayment;\n    if (patch.deliveryFee !== undefined) out[style === 'snake' ? 'delivery_fee' : 'deliveryFee'] = patch.deliveryFee;\n    if (patch.installments !== undefined) out.installments = patch.installments;\n    if (patch.installmentValue !== undefined) out[style === 'snake' ? 'installment_value' : 'installmentValue'] = patch.installmentValue;\n    if (patch.date !== undefined) out.date = patch.date;\n    if (patch.firstDueDate !== undefined) {\n        const value = patch.firstDueDate instanceof Date ? patch.firstDueDate.toISOString() : patch.firstDueDate;\n        out[style === 'snake' ? 'first_due_date' : 'firstDueDate'] = value;\n    }\n    if (patch.paymentMethod !== undefined) out[style === 'snake' ? 'payment_method' : 'paymentMethod'] = patch.paymentMethod;\n    if (patch.installmentDetails !== undefined) out[style === 'snake' ? 'installment_details' : 'installmentDetails'] = patch.installmentDetails;\n    if (patch.installmentCardDetails !== undefined) out[style === 'snake' ? 'installment_card_details' : 'installmentCardDetails'] = patch.installmentCardDetails;\n    if (patch.trackingCode !== undefined) out[style === 'snake' ? 'tracking_code' : 'trackingCode'] = patch.trackingCode;\n    if (patch.attachments !== undefined) out.attachments = patch.attachments;\n    if (patch.sellerId !== undefined) out[style === 'snake' ? 'seller_id' : 'sellerId'] = patch.sellerId;\n    if (patch.sellerName !== undefined) out[style === 'snake' ? 'seller_name' : 'sellerName'] = patch.sellerName;\n    if (patch.commission !== undefined) out.commission = patch.commission;\n    if (patch.commissionDate !== undefined) out[style === 'snake' ? 'commission_date' : 'commissionDate'] = patch.commissionDate;\n    if (patch.commissionPaid !== undefined) out[style === 'snake' ? 'commission_paid' : 'commissionPaid'] = patch.commissionPaid;\n    if (patch.isCommissionManual !== undefined) out[style === 'snake' ? 'is_commission_manual' : 'isCommissionManual'] = patch.isCommissionManual;\n    if (patch.observations !== undefined) out.observations = patch.observations;\n    if (patch.source !== undefined) out.source = patch.source;\n    if (patch.createdById !== undefined) out[style === 'snake' ? 'created_by_id' : 'createdById'] = patch.createdById;\n    if (patch.createdByName !== undefined) out[style === 'snake' ? 'created_by_name' : 'createdByName'] = patch.createdByName;\n    if (patch.createdByRole !== undefined) out[style === 'snake' ? 'created_by_role' : 'createdByRole'] = patch.createdByRole;\n    if (patch.createdIp !== undefined) out[style === 'snake' ? 'created_ip' : 'createdIp'] = patch.createdIp;\n    if (patch.asaas !== undefined) out.asaas = patch.asaas;\n    return out;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VUFBVSx5QkFBeUIscUJBQXFCLEdBQUdELE1BQU1oQixrQkFBa0I7SUFFbkcsSUFBSWdCLE1BQU1kLFlBQVksS0FBS3ZDLFdBQVd1RCxJQUFJaEIsWUFBWSxHQUFHYyxNQUFNZCxZQUFZO0lBQzNFLElBQUljLE1BQU1iLE1BQU0sS0FBS3hDLFdBQVd1RCxJQUFJZixNQUFNLEdBQUdhLE1BQU1iLE1BQU07SUFFekQsSUFBSWEsTUFBTVYsV0FBVyxLQUFLM0MsV0FBV3VELEdBQUcsQ0FBQ0QsVUFBVSxVQUFVLGtCQUFrQixjQUFjLEdBQUdELE1BQU1WLFdBQVc7SUFDakgsSUFBSVUsTUFBTVIsYUFBYSxLQUFLN0MsV0FBV3VELEdBQUcsQ0FBQ0QsVUFBVSxVQUFVLG9CQUFvQixnQkFBZ0IsR0FBR0QsTUFBTVIsYUFBYTtJQUN6SCxJQUFJUSxNQUFNTixhQUFhLEtBQUsvQyxXQUFXdUQsR0FBRyxDQUFDRCxVQUFVLFVBQVUsb0JBQW9CLGdCQUFnQixHQUFHRCxNQUFNTixhQUFhO0lBQ3pILElBQUlNLE1BQU1KLFNBQVMsS0FBS2pELFdBQVd1RCxHQUFHLENBQUNELFVBQVUsVUFBVSxlQUFlLFlBQVksR0FBR0QsTUFBTUosU0FBUztJQUV4RyxJQUFJSSxNQUFNRixLQUFLLEtBQUtuRCxXQUFXdUQsSUFBSUosS0FBSyxHQUFHRSxNQUFNRixLQUFLO0lBRXRELE9BQU9JO0FBQ1QiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcUmFmYWVsXFxEZXNrdG9wXFxBREMtUFJPLTIwMjYtbWFpblxcc3JjXFxsaWJcXHN1cGFiYXNlLW1hcHBlcnMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBPcmRlciB9IGZyb20gJ0AvbGliL3R5cGVzJztcblxuZXhwb3J0IGZ1bmN0aW9uIG1hcERiT3JkZXJUb09yZGVyKHJvdzogYW55KTogT3JkZXIge1xuICBjb25zdCBmaXJzdER1ZVJhdyA9IHJvdy5maXJzdF9kdWVfZGF0ZSA/PyByb3cuZmlyc3REdWVEYXRlO1xuICBjb25zdCBmaXJzdER1ZURhdGUgPSBmaXJzdER1ZVJhdyA/IG5ldyBEYXRlKGZpcnN0RHVlUmF3KSA6IHVuZGVmaW5lZDtcbiAgY29uc3QgaXRlbXNSYXcgPSByb3cuaXRlbXM7XG4gIGNvbnN0IGl0ZW1zID0gQXJyYXkuaXNBcnJheShpdGVtc1JhdykgPyBpdGVtc1JhdyA6IFtdO1xuXG4gIHJldHVybiB7XG4gICAgaWQ6IHJvdy5pZCxcbiAgICBjdXN0b21lcjogcm93LmN1c3RvbWVyLFxuICAgIGl0ZW1zLFxuICAgIHRvdGFsOiByb3cudG90YWwsXG4gICAgc3VidG90YWw6IHJvdy5zdWJ0b3RhbCA/PyB1bmRlZmluZWQsXG4gICAgZGlzY291bnQ6IHJvdy5kaXNjb3VudCA/PyB1bmRlZmluZWQsXG4gICAgZG93blBheW1lbnQ6IHJvdy5kb3duX3BheW1lbnQgPz8gcm93LmRvd25QYXltZW50ID8/IHVuZGVmaW5lZCxcbiAgICBkZWxpdmVyeUZlZTogcm93LmRlbGl2ZXJ5X2ZlZSA/PyByb3cuZGVsaXZlcnlGZWUgPz8gdW5kZWZpbmVkLFxuICAgIGluc3RhbGxtZW50czogcm93Lmluc3RhbGxtZW50cyA/PyAwLFxuICAgIGluc3RhbGxtZW50VmFsdWU6IHJvdy5pbnN0YWxsbWVudF92YWx1ZSA/PyByb3cuaW5zdGFsbG1lbnRWYWx1ZSA/PyAwLFxuICAgIGRhdGU6IHJvdy5kYXRlLFxuICAgIGZpcnN0RHVlRGF0ZSxcbiAgICBzdGF0dXM6IHJvdy5zdGF0dXMsXG4gICAgcGF5bWVudE1ldGhvZDogKHJvdy5wYXltZW50X21ldGhvZCA/PyByb3cucGF5bWVudE1ldGhvZCkgYXMgYW55LFxuICAgIGluc3RhbGxtZW50RGV0YWlsczogKHJvdy5pbnN0YWxsbWVudF9kZXRhaWxzID8/IHJvdy5pbnN0YWxsbWVudERldGFpbHMgPz8gW10pIGFzIGFueSxcbiAgICBpbnN0YWxsbWVudENhcmREZXRhaWxzOiByb3cuaW5zdGFsbG1lbnRfY2FyZF9kZXRhaWxzID8/IHJvdy5pbnN0YWxsbWVudENhcmREZXRhaWxzID8/IHVuZGVmaW5lZCxcbiAgICB0cmFja2luZ0NvZGU6IHJvdy50cmFja2luZ19jb2RlID8/IHJvdy50cmFja2luZ0NvZGUgPz8gdW5kZWZpbmVkLFxuICAgIGF0dGFjaG1lbnRzOiByb3cuYXR0YWNobWVudHMgPz8gdW5kZWZpbmVkLFxuICAgIHNlbGxlcklkOiByb3cuc2VsbGVyX2lkID8/IHJvdy5zZWxsZXJJZCA/PyB1bmRlZmluZWQsXG4gICAgc2VsbGVyTmFtZTogcm93LnNlbGxlcl9uYW1lID8/IHJvdy5zZWxsZXJOYW1lID8/IHVuZGVmaW5lZCxcbiAgICBjb21taXNzaW9uOiByb3cuY29tbWlzc2lvbiA/PyB1bmRlZmluZWQsXG4gICAgY29tbWlzc2lvbkRhdGU6IHJvdy5jb21taXNzaW9uX2RhdGUgPz8gcm93LmNvbW1pc3Npb25EYXRlID8/IHVuZGVmaW5lZCxcbiAgICBjb21taXNzaW9uUGFpZDogcm93LmNvbW1pc3Npb25fcGFpZCA/PyByb3cuY29tbWlzc2lvblBhaWQgPz8gdW5kZWZpbmVkLFxuICAgIGlzQ29tbWlzc2lvbk1hbnVhbDogcm93LmlzX2NvbW1pc3Npb25fbWFudWFsID8/IHJvdy5pc0NvbW1pc3Npb25NYW51YWwgPz8gdW5kZWZpbmVkLFxuICAgIG9ic2VydmF0aW9uczogcm93Lm9ic2VydmF0aW9ucyA/PyB1bmRlZmluZWQsXG4gICAgc291cmNlOiByb3cuc291cmNlID8/IHVuZGVmaW5lZCxcbiAgICBjcmVhdGVkQXQ6IHJvdy5jcmVhdGVkX2F0ID8/IHJvdy5jcmVhdGVkQXQgPz8gdW5kZWZpbmVkLFxuICAgIGNyZWF0ZWRCeUlkOiByb3cuY3JlYXRlZF9ieV9pZCA/PyByb3cuY3JlYXRlZEJ5SWQgPz8gdW5kZWZpbmVkLFxuICAgIGNyZWF0ZWRCeU5hbWU6IHJvdy5jcmVhdGVkX2J5X25hbWUgPz8gcm93LmNyZWF0ZWRCeU5hbWUgPz8gdW5kZWZpbmVkLFxuICAgIGNyZWF0ZWRCeVJvbGU6IHJvdy5jcmVhdGVkX2J5X3JvbGUgPz8gcm93LmNyZWF0ZWRCeVJvbGUgPz8gdW5kZWZpbmVkLFxuICAgIGNyZWF0ZWRJcDogcm93LmNyZWF0ZWRfaXAgPz8gcm93LmNyZWF0ZWRJcCA/PyB1bmRlZmluZWQsXG4gICAgYXNhYXM6IHJvdy5hc2FhcyA/PyB1bmRlZmluZWQsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYXBPcmRlclBhdGNoVG9EYihcbiAgcGF0Y2g6IFBhcnRpYWw8T3JkZXI+LFxuICBzdHlsZTogJ2NhbWVsJyB8ICdzbmFrZScgPSAnY2FtZWwnXG4pOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcbiAgY29uc3Qgb3V0OiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XG5cbiAgaWYgKHBhdGNoLnN0YXR1cyAhPT0gdW5kZWZpbmVkKSBvdXQuc3RhdHVzID0gcGF0Y2guc3RhdHVzO1xuICBpZiAocGF0Y2guY3VzdG9tZXIgIT09IHVuZGVmaW5lZCkgb3V0LmN1c3RvbWVyID0gcGF0Y2guY3VzdG9tZXIgYXMgYW55O1xuICBpZiAocGF0Y2guaXRlbXMgIT09IHVuZGVmaW5lZCkgb3V0Lml0ZW1zID0gcGF0Y2guaXRlbXMgYXMgYW55O1xuICBpZiAocGF0Y2gudG90YWwgIT09IHVuZGVmaW5lZCkgb3V0LnRvdGFsID0gcGF0Y2gudG90YWw7XG4gIGlmIChwYXRjaC5zdWJ0b3RhbCAhPT0gdW5kZWZpbmVkKSBvdXQuc3VidG90YWwgPSBwYXRjaC5zdWJ0b3RhbDtcbiAgaWYgKHBhdGNoLmRpc2NvdW50ICE9PSB1bmRlZmluZWQpIG91dC5kaXNjb3VudCA9IHBhdGNoLmRpc2NvdW50O1xuICBpZiAocGF0Y2guZG93blBheW1lbnQgIT09IHVuZGVmaW5lZCkgb3V0W3N0eWxlID09PSAnc25ha2UnID8gJ2Rvd25fcGF5bWVudCcgOiAnZG93blBheW1lbnQnXSA9IHBhdGNoLmRvd25QYXltZW50O1xuICBpZiAocGF0Y2guZGVsaXZlcnlGZWUgIT09IHVuZGVmaW5lZCkgb3V0W3N0eWxlID09PSAnc25ha2UnID8gJ2RlbGl2ZXJ5X2ZlZScgOiAnZGVsaXZlcnlGZWUnXSA9IHBhdGNoLmRlbGl2ZXJ5RmVlO1xuICBpZiAocGF0Y2guaW5zdGFsbG1lbnRzICE9PSB1bmRlZmluZWQpIG91dC5pbnN0YWxsbWVudHMgPSBwYXRjaC5pbnN0YWxsbWVudHM7XG4gIGlmIChwYXRjaC5pbnN0YWxsbWVudFZhbHVlICE9PSB1bmRlZmluZWQpXG4gICAgb3V0W3N0eWxlID09PSAnc25ha2UnID8gJ2luc3RhbGxtZW50X3ZhbHVlJyA6ICdpbnN0YWxsbWVudFZhbHVlJ10gPSBwYXRjaC5pbnN0YWxsbWVudFZhbHVlO1xuICBpZiAocGF0Y2guZGF0ZSAhPT0gdW5kZWZpbmVkKSBvdXQuZGF0ZSA9IHBhdGNoLmRhdGU7XG5cbiAgaWYgKHBhdGNoLmZpcnN0RHVlRGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgdmFsdWU6IGFueSA9XG4gICAgICBwYXRjaC5maXJzdER1ZURhdGUgaW5zdGFuY2VvZiBEYXRlID8gcGF0Y2guZmlyc3REdWVEYXRlLnRvSVNPU3RyaW5nKCkgOiAocGF0Y2guZmlyc3REdWVEYXRlIGFzIGFueSk7XG4gICAgb3V0W3N0eWxlID09PSAnc25ha2UnID8gJ2ZpcnN0X2R1ZV9kYXRlJyA6ICdmaXJzdER1ZURhdGUnXSA9IHZhbHVlO1xuICB9XG5cbiAgaWYgKHBhdGNoLnBheW1lbnRNZXRob2QgIT09IHVuZGVmaW5lZCkgb3V0W3N0eWxlID09PSAnc25ha2UnID8gJ3BheW1lbnRfbWV0aG9kJyA6ICdwYXltZW50TWV0aG9kJ10gPSBwYXRjaC5wYXltZW50TWV0aG9kIGFzIGFueTtcbiAgaWYgKHBhdGNoLmluc3RhbGxtZW50RGV0YWlscyAhPT0gdW5kZWZpbmVkKVxuICAgIG91dFtzdHlsZSA9PT0gJ3NuYWtlJyA/ICdpbnN0YWxsbWVudF9kZXRhaWxzJyA6ICdpbnN0YWxsbWVudERldGFpbHMnXSA9IHBhdGNoLmluc3RhbGxtZW50RGV0YWlscyBhcyBhbnk7XG4gIGlmIChwYXRjaC5pbnN0YWxsbWVudENhcmREZXRhaWxzICE9PSB1bmRlZmluZWQpXG4gICAgb3V0W3N0eWxlID09PSAnc25ha2UnID8gJ2luc3RhbGxtZW50X2NhcmRfZGV0YWlscycgOiAnaW5zdGFsbG1lbnRDYXJkRGV0YWlscyddID0gcGF0Y2guaW5zdGFsbG1lbnRDYXJkRGV0YWlscyBhcyBhbnk7XG4gIGlmIChwYXRjaC50cmFja2luZ0NvZGUgIT09IHVuZGVmaW5lZCkgb3V0W3N0eWxlID09PSAnc25ha2UnID8gJ3RyYWNraW5nX2NvZGUnIDogJ3RyYWNraW5nQ29kZSddID0gcGF0Y2gudHJhY2tpbmdDb2RlO1xuICBpZiAocGF0Y2guYXR0YWNobWVudHMgIT09IHVuZGVmaW5lZCkgb3V0LmF0dGFjaG1lbnRzID0gcGF0Y2guYXR0YWNobWVudHMgYXMgYW55O1xuXG4gIGlmIChwYXRjaC5zZWxsZXJJZCAhPT0gdW5kZWZpbmVkKSBvdXRbc3R5bGUgPT09ICdzbmFrZScgPyAnc2VsbGVyX2lkJyA6ICdzZWxsZXJJZCddID0gcGF0Y2guc2VsbGVySWQ7XG4gIGlmIChwYXRjaC5zZWxsZXJOYW1lICE9PSB1bmRlZmluZWQpIG91dFtzdHlsZSA9PT0gJ3NuYWtlJyA/ICdzZWxsZXJfbmFtZScgOiAnc2VsbGVyTmFtZSddID0gcGF0Y2guc2VsbGVyTmFtZTtcblxuICBpZiAocGF0Y2guY29tbWlzc2lvbiAhPT0gdW5kZWZpbmVkKSBvdXQuY29tbWlzc2lvbiA9IHBhdGNoLmNvbW1pc3Npb247XG4gIGlmIChwYXRjaC5jb21taXNzaW9uRGF0ZSAhPT0gdW5kZWZpbmVkKSBvdXRbc3R5bGUgPT09ICdzbmFrZScgPyAnY29tbWlzc2lvbl9kYXRlJyA6ICdjb21taXNzaW9uRGF0ZSddID0gcGF0Y2guY29tbWlzc2lvbkRhdGU7XG4gIGlmIChwYXRjaC5jb21taXNzaW9uUGFpZCAhPT0gdW5kZWZpbmVkKSBvdXRbc3R5bGUgPT09ICdzbmFrZScgPyAnY29tbWlzc2lvbl9wYWlkJyA6ICdjb21taXNzaW9uUGFpZCddID0gcGF0Y2guY29tbWlzc2lvblBhaWQ7XG4gIGlmIChwYXRjaC5pc0NvbW1pc3Npb25NYW51YWwgIT09IHVuZGVmaW5lZClcbiAgICBvdXRbc3R5bGUgPT09ICdzbmFrZScgPyAnaXNfY29tbWlzc2lvbl9tYW51YWwnIDogJ2lzQ29tbWlzc2lvbk1hbnVhbCddID0gcGF0Y2guaXNDb21taXNzaW9uTWFudWFsO1xuXG4gIGlmIChwYXRjaC5vYnNlcnZhdGlvbnMgIT09IHVuZGVmaW5lZCkgb3V0Lm9ic2VydmF0aW9ucyA9IHBhdGNoLm9ic2VydmF0aW9ucztcbiAgaWYgKHBhdGNoLnNvdXJjZSAhPT0gdW5kZWZpbmVkKSBvdXQuc291cmNlID0gcGF0Y2guc291cmNlIGFzIGFueTtcblxuICBpZiAocGF0Y2guY3JlYXRlZEJ5SWQgIT09IHVuZGVmaW5lZCkgb3V0W3N0eWxlID09PSAnc25ha2UnID8gJ2NyZWF0ZWRfYnlfaWQnIDogJ2NyZWF0ZWRCeUlkJ10gPSBwYXRjaC5jcmVhdGVkQnlJZDtcbiAgaWYgKHBhdGNoLmNyZWF0ZWRCeU5hbWUgIT09IHVuZGVmaW5lZCkgb3V0W3N0eWxlID09PSAnc25ha2UnID8gJ2NyZWF0ZWRfYnlfbmFtZScgOiAnY3JlYXRlZEJ5TmFtZSddID0gcGF0Y2guY3JlYXRlZEJ5TmFtZTtcbiAgaWYgKHBhdGNoLmNyZWF0ZWRCeVJvbGUgIT09IHVuZGVmaW5lZCkgb3V0W3N0eWxlID09PSAnc25ha2UnID8gJ2NyZWF0ZWRfYnlfcm9sZScgOiAnY3JlYXRlZEJ5Um9sZSddID0gcGF0Y2guY3JlYXRlZEJ5Um9sZSBhcyBhbnk7XG4gIGlmIChwYXRjaC5jcmVhdGVkSXAgIT09IHVuZGVmaW5lZCkgb3V0W3N0eWxlID09PSAnc25ha2UnID8gJ2NyZWF0ZWRfaXAnIDogJ2NyZWF0ZWRJcCddID0gcGF0Y2guY3JlYXRlZElwO1xuXG4gIGlmIChwYXRjaC5hc2FhcyAhPT0gdW5kZWZpbmVkKSBvdXQuYXNhYXMgPSBwYXRjaC5hc2FhcyBhcyBhbnk7XG5cbiAgcmV0dXJuIG91dDtcbn1cbiJdLCJuYW1lcyI6WyJtYXBEYk9yZGVyVG9PcmRlciIsInJvdyIsImZpcnN0RHVlUmF3IiwiZmlyc3RfZHVlX2RhdGUiLCJmaXJzdER1ZURhdGUiLCJEYXRlIiwidW5kZWZpbmVkIiwiaXRlbXNSYXciLCJpdGVtcyIsIkFycmF5IiwiaXNBcnJheSIsImlkIiwiY3VzdG9tZXIiLCJ0b3RhbCIsInN1YnRvdGFsIiwiZGlzY291bnQiLCJkb3duUGF5bWVudCIsImRvd25fcGF5bWVudCIsImRlbGl2ZXJ5RmVlIiwiZGVsaXZlcnlfZmVlIiwiaW5zdGFsbG1lbnRzIiwiaW5zdGFsbG1lbnRWYWx1ZSIsImluc3RhbGxtZW50X3ZhbHVlIiwiZGF0ZSIsInN0YXR1cyIsInBheW1lbnRNZXRob2QiLCJwYXltZW50X21ldGhvZCIsImluc3RhbGxtZW50RGV0YWlscyIsImluc3RhbGxtZW50X2RldGFpbHMiLCJpbnN0YWxsbWVudENhcmREZXRhaWxzIiwiaW5zdGFsbG1lbnRfY2FyZF9kZXRhaWxzIiwidHJhY2tpbmdDb2RlIiwidHJhY2tpbmdfY29kZSIsImF0dGFjaG1lbnRzIiwic2VsbGVySWQiLCJzZWxsZXJfaWQiLCJzZWxsZXJOYW1lIiwic2VsbGVyX25hbWUiLCJjb21taXNzaW9uIiwiY29tbWlzc2lvbkRhdGUiLCJjb21taXNzaW9uX2RhdGUiLCJjb21taXNzaW9uUGFpZCIsImNvbW1pc3Npb25fcGFpZCIsImlzQ29tbWlzc2lvbk1hbnVhbCIsImlzX2NvbW1pc3Npb25fbWFudWFsIiwib2JzZXJ2YXRpb25zIiwic291cmNlIiwiY3JlYXRlZEF0IiwiY3JlYXRlZF9hdCIsImNyZWF0ZWRCeUlkIiwiY3JlYXRlZF9ieV9pZCIsImNyZWF0ZWRCeU5hbWUiLCJjcmVhdGVkX2J5X25hbWUiLCJjcmVhdGVkQnlSb2xlIiwiY3JlYXRlZF9ieV9yb2xlIiwiY3JlYXRlZElwIiwiY3JlYXRlZF9pcCIsImFzYWFzIiwibWFwT3JkZXJQYXRjaFRvRGIiLCJwYXRjaCIsInN0eWxlIiwib3V0IiwidmFsdWUiLCJ0b0lTT1N0cmluZyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase-mappers.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/@opentelemetry","vendor-chunks/tslib","vendor-chunks/iceberg-js"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Forders%2Froute&page=%2Fapi%2Fadmin%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Forders%2Froute.ts&appDir=C%3A%5CUsers%5CRafael%5CDesktop%5CADC-PRO-2026-main%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CRafael%5CDesktop%5CADC-PRO-2026-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();